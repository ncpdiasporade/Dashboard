<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ржХрзБржорж┐рж▓рзНрж▓рж╛-рзк ржнрзЛржЯрж╛рж░ ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб (ржмрж╛ржВрж▓рж╛ ржирж╛ржо рж╕рж╣) - рж╕ржорзНржкрзВрж░рзНржг ржЧржмрзЗрж╖ржгрж╛ржнрж┐рждрзНрждрж┐ржХ</title>
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Leaflet CSS & JS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- html2canvas + jsPDF -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <!-- Font Awesome for Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    #map { height: 400px; width: 100%; border-radius: 12px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); margin-top: 10px; }
    canvas { max-width: 100%; height: auto; }
    .popup { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 20px; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); z-index: 1000; text-align: center; max-width: 80%; }
    .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 999; }
    select { min-width: 150px; }
    .sources { background: #f3f4f6; padding: 12px; border-radius: 8px; margin-top: 12px; font-size: 0.9rem; }
    .sources a { color: #3b82f6; text-decoration: underline; font-weight: 500; }
    .analysis-section { background: #f9fafb; padding: 20px; border-radius: 8px; margin-top: 20px; }
    .tab-button { padding: 8px 16px; border: none; background: #e5e7eb; cursor: pointer; border-radius: 4px; }
    .tab-button.active { background: #3b82f6; color: white; }
    .tab-content { display: none; }
    .tab-content.active { display: block; }
    .strategy-card { transition: transform 0.3s ease; }
    .strategy-card:hover { transform: translateY(-5px); }
    .risk-high { background-color: #fef2f2; border-left: 4px solid #dc2626; }
    .risk-medium { background-color: #fffbeb; border-left: 4px solid #f59e0b; }
    .risk-low { background-color: #f0fdf4; border-left: 4px solid #10b981; }
  </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-green-50 min-h-screen p-4 font-sans">
  <div class="max-w-7xl mx-auto">
    <!-- рж╣рзЗржбрж╛рж░ -->
    <header class="text-center mb-8">
      <h1 class="text-3xl md:text-4xl font-bold text-blue-800">ржХрзБржорж┐рж▓рзНрж▓рж╛-рзк ржнрзЛржЯрж╛рж░ ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб (рж╕ржорзНржкрзВрж░рзНржг рззрзл ржЗржЙржирж┐ржпрж╝ржи)</h1>
      <p class="text-gray-600 mt-2">ржжрзЗржмрж┐ржжрзНржмрж╛рж░ ржЙржкржЬрзЗрж▓рж╛ + ржЗржЙржирж┐ржпрж╝ржи ржнрж┐рждрзНрждрж┐ржХ ржЗржирзНржЯрж╛рж░ржЕрзНржпрж╛ржХржЯрж┐ржн ржмрж┐рж╢рзНрж▓рзЗрж╖ржг + ржорзНржпрж╛ржк (рзирзжрзирзм ржирж┐рж░рзНржмрж╛ржЪржи)</p>
      <div class="sources mt-4">
        <strong class="block mb-2">ржбрзЗржЯрж╛ рж╕рзВрждрзНрж░ (ржпрж╛ржЪрж╛ржЗржХрзГржд):</strong>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-2 text-sm">
          <div>
            <strong>ржЬржирж╕ржВржЦрзНржпрж╛ ржУ ржбрзЗржорзЛржЧрзНрж░рж╛ржлрж┐ржХ:</strong><br>
            <a href="https://bbs.portal.gov.bd/sites/default/files/files/bbs.portal.gov.bd/page/b343a8b4_956b_45ca_872f_4cf9b2f1a6e0/2024-01-31-15-51-b53c55dd692233ae401ba013060b9cbb.pdf" target="_blank">BBS рзирзжрзирзи Census</a> |
            <a href="https://www.bbs.gov.bd/site/page/47856ad0-7e1c-4aab-bd78-892733bc06eb/Population-and-Housing-Census" target="_blank">BBS рж╕рж╛ржЗржЯ</a> |
            <a href="https://debidwar.comilla.gov.bd/site/page/27b3b6a1-201f-11e7-8f57-286ed488c766/" target="_blank">ржжрзЗржмрж┐ржжрзНржмрж╛рж░ ржЙржкржЬрзЗрж▓рж╛ ржУржпрж╝рзЗржмрж╕рж╛ржЗржЯ</a>
          </div>
          <div>
            <strong>ржнрзЛржЯрж╛рж░ ржУ ржирж┐рж░рзНржмрж╛ржЪржи:</strong><br>
            <a href="https://www.ecs.gov.bd/site/publications/8b70e0d7-7971-4452-9f5a-7c936c9397c1/" target="_blank">EC Voter List рзирзжрзирзл (ржбрзНрж░рж╛ржлржЯ)</a> |
            <a href="https://www.ecs.gov.bd/site/election-data/3c8a4b62-5a16-4898-af3f-6b922ad7a512/National" target="_blank">рзирзжрззрзо ржирж┐рж░рзНржмрж╛ржЪржи ржлрж▓рж╛ржлрж▓</a> |
            <a href="https://en.wikipedia.org/wiki/Comilla-4_(constituency)" target="_blank">ржЙржЗржХрж┐ржкрж┐ржбрж┐ржпрж╝рж╛ ржХрзБржорж┐рж▓рзНрж▓рж╛-рзк</a> |
            <a href="https://github.com/yasserius/bangladesh_geojson_shapefile" target="_blank">GeoJSON ржмрж╛ржВрж▓рж╛ржжрзЗрж╢</a>
          </div>
        </div>
      </div>
    </header>

    <!-- ржлрж┐рж▓рзНржЯрж╛рж░ -->
    <div class="mb-6 flex flex-wrap justify-center gap-3">
      <select id="upazilaFilter" class="px-4 py-2 border rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
        <option value="debidwar">ржжрзЗржмрж┐ржжрзНржмрж╛рж░ ржЙржкржЬрзЗрж▓рж╛</option>
      </select>
      <select id="unionFilter" class="px-4 py-2 border rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
        <option value="">рж╕ржХрж▓ ржЗржЙржирж┐ржпрж╝ржи (рззрзлржЯрж┐)</option>
      </select>
      <button onclick="downloadPDF()" class="bg-green-600 text-white px-5 py-2 rounded-lg hover:bg-green-700 transition flex items-center gap-2">
        <i class="fas fa-file-pdf"></i> PDF ржбрж╛ржЙржирж▓рзЛржб
      </button>
      <button onclick="downloadCandidateReport()" class="bg-blue-600 text-white px-5 py-2 rounded-lg hover:bg-blue-700 transition flex items-center gap-2">
        <i class="fas fa-download"></i> ржХрзМрж╢рж▓ржЧржд рж░рж┐ржкрзЛрж░рзНржЯ
      </button>
    </div>

    <!-- ржХрзМрж╢рж▓ржЧржд рж╕рждрж░рзНржХрждрж╛ -->
    <div class="bg-white p-4 rounded-xl shadow-lg mb-6">
      <h3 class="text-xl font-bold mb-3 text-blue-800 flex items-center gap-2">
        <i class="fas fa-exclamation-triangle text-yellow-500"></i> ржирж┐рж░рзНржмрж╛ржЪржирзА рж╕рждрж░рзНржХрждрж╛ ржУ рж╕рзБржпрзЛржЧ
      </h3>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="risk-high p-4 rounded-lg">
          <h4 class="font-bold text-lg mb-2">тЪая╕П ржЙржЪрзНржЪ ржЭрзБржБржХрж┐ ржПрж▓рж╛ржХрж╛</h4>
          <p class="text-gray-700"><strong>ржорзЛрж╣ржиржкрзБрж░, рж░рж╛ржЬрж╛ржорзЗрж╣рзЗрж░</strong> - BNP рж╕рж╛ржкрзЛрж░рзНржЯ рзйрзи%+</p>
          <p class="text-sm mt-2">ржкрзНрж░рждрж┐ржХрзНрж░рж┐ржпрж╝рж╛: ржжрзНржмрж┐ржЧрзБржг ржкрзНрж░ржЪрж╛рж░ржгрж╛, рж╕рзНржерж╛ржирзАржпрж╝ ржирзЗрждрж╛ржжрзЗрж░ рж╕рж╛ржерзЗ ржЬрзЛржЯ</p>
        </div>
        <div class="risk-medium p-4 rounded-lg">
          <h4 class="font-bold text-lg mb-2">ЁЯОп рж╕рзБржпрзЛржЧрзЗрж░ ржПрж▓рж╛ржХрж╛</h4>
          <p class="text-gray-700"><strong>ржПрж▓рж╛рж╣рж╛ржмрж╛ржж, ржЙрждрзНрждрж░ ржЧрзБржирж╛ржЗржШрж░</strong> - ржЙржжрзАржпрж╝ржорж╛ржи ржирждрзБржи ржнрзЛржЯрж╛рж░</p>
          <p class="text-sm mt-2">ржкрзНрж░рждрж┐ржХрзНрж░рж┐ржпрж╝рж╛: ржпрзБржм-ржХрзЗржирзНржжрзНрж░рж┐ржХ ржХрзНржпрж╛ржорзНржкрзЗржЗржи, ржбрж┐ржЬрж┐ржЯрж╛рж▓ ржкрзНрж░ржЪрж╛рж░ржгрж╛</p>
        </div>
        <div class="risk-low p-4 rounded-lg">
          <h4 class="font-bold text-lg mb-2">тЬЕ рж╢ржХрзНрждрж┐рж╢рж╛рж▓рзА ржПрж▓рж╛ржХрж╛</h4>
          <p class="text-gray-700"><strong>ржмрж░ржХрж╛ржорждрж╛, ржзрж╛ржорждрзА</strong> - AL рж╕рж╛ржкрзЛрж░рзНржЯ рзнрзж%+</p>
          <p class="text-sm mt-2">ржкрзНрж░рждрж┐ржХрзНрж░рж┐ржпрж╝рж╛: рж░ржХрзНрж╖ржгрж╛ржмрзЗржХрзНрж╖ржг, ржнрзЛржЯрж╛рж░ ржЯрж╛рж░рзНржиржЖржЙржЯ ржирж┐рж╢рзНржЪрж┐рждржХрж░ржг</p>
        </div>
      </div>
    </div>

    <!-- ржЪрж╛рж░рзНржЯ ржЧрзНрж░рж┐ржб -->
    <div id="dashboard" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
      <div class="bg-white p-5 rounded-xl shadow-lg">
        <h3 class="text-lg font-semibold mb-3 text-center">рж▓рж┐ржЩрзНржЧ ржЕржирзБржкрж╛ржд</h3>
        <canvas id="genderChart"></canvas>
        <p class="text-sm text-gray-500 mt-2 text-center">ржорж╣рж┐рж▓рж╛ ржнрзЛржЯрж╛рж░ рзлрзй.рзмрзм% (рж╕рзВрждрзНрж░: BBS рзирзжрзирзи)</p>
      </div>
      <div class="bg-white p-5 rounded-xl shadow-lg">
        <h3 class="text-lg font-semibold mb-3 text-center">ржмржпрж╝рж╕ ржЧрзНрж░рзБржк</h3>
        <canvas id="ageChart"></canvas>
        <p class="text-sm text-gray-500 mt-2 text-center">ржпрзБржмржХ (рззрзо-рзйрзл): рзкрзн% | ржХрзНрж▓рж┐ржХ ржХрж░рзБржи ржХрзНржпрж╛ржорзНржкрзЗржЗржи ржЖржЗржбрж┐ржпрж╝рж╛рж░ ржЬржирзНржп</p>
      </div>
      <div class="bg-white p-5 rounded-xl shadow-lg">
        <h3 class="text-lg font-semibold mb-3 text-center">ржзрж░рзНржорзАржпрж╝ ржЧржаржи</h3>
        <canvas id="religionChart"></canvas>
        <p class="text-sm text-gray-500 mt-2 text-center">ржорзБрж╕рж▓рж┐ржо рзпрзл%, рж╣рж┐ржирзНржжрзБ рзк.рзл% (рж╕рзВрждрзНрж░: BBS рзирзжрзирзи)</p>
      </div>
      <div class="bg-white p-5 rounded-xl shadow-lg">
        <h3 class="text-lg font-semibold mb-3 text-center">рж╢рж┐ржХрзНрж╖рж╛ рж╕рзНрждрж░</h3>
        <canvas id="educationChart"></canvas>
        <p class="text-sm text-gray-500 mt-2 text-center">рж╕рж╛ржХрзНрж╖рж░рждрж╛ рзнрзм.рзлрзм% (рж╕рзВрждрзНрж░: ржЙржкржЬрзЗрж▓рж╛ рж╢рж┐ржХрзНрж╖рж╛ ржЕржлрж┐рж╕)</p>
      </div>
      <div class="bg-white p-5 rounded-xl shadow-lg">
        <h3 class="text-lg font-semibold mb-3 text-center">ржкрзЗрж╢рж╛ ржмрж┐рждрж░ржг</h3>
        <canvas id="occupationChart"></canvas>
        <p class="text-sm text-gray-500 mt-2 text-center">ржХрзГрж╖рж┐ рзнрзж%, ржмрзНржпржмрж╕рж╛ рззрзл% (рж╕рзВрждрзНрж░: BBS рж╢рзНрж░ржо ржЬрж░рж┐ржк)</p>
      </div>
      <div class="bg-white p-6 rounded-xl shadow-lg">
        <h3 class="text-lg font-semibold mb-3 text-center">ржнрзЛржЯрж╛рж░ ржЯрж╛рж░рзНржиржЖржЙржЯ ржЗрждрж┐рж╣рж╛рж╕</h3>
        <canvas id="turnoutChart"></canvas>
        <p class="text-sm text-gray-500 mt-2 text-center">рзирзжрзирзк: рзкрзж% | рж▓ржХрзНрж╖рзНржп рзирзжрзирзм: рзмрзл%+</p>
      </div>
    </div>

    <!-- ржЗржЙржирж┐ржпрж╝ржи рждрзБрж▓ржирж╛ржорзВрж▓ржХ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг -->
    <div class="bg-white p-5 rounded-xl shadow-lg mb-6">
      <h3 class="text-lg font-semibold mb-3 text-center">ржЗржЙржирж┐ржпрж╝ржиржУржпрж╝рж╛рж░рзА рждрзБрж▓ржирж╛ржорзВрж▓ржХ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг</h3>
      <canvas id="comparisonChart"></canvas>
      <p class="text-sm text-gray-500 mt-2 text-center">рж╕ржмржЪрзЗржпрж╝рзЗ ржмрзЗрж╢рж┐ ржнрзЛржЯрж╛рж░: ржорзЛрж╣ржиржкрзБрж░ (рзирзм,рзорзжрзж) | рж╕ржмржЪрзЗржпрж╝рзЗ ржмрзЗрж╢рж┐ ржпрзБржмржХ: ржорзЛрж╣ржиржкрзБрж░ (рзлрзз%)</p>
    </div>

    <!-- ржЗржирзНржЯрж╛рж░ржЕрзНржпрж╛ржХржЯрж┐ржн ржорзНржпрж╛ржк -->
    <div class="bg-white p-5 rounded-xl shadow-lg mb-6">
      <h3 class="text-lg font-semibold mb-3 text-center">ржЗржЙржирж┐ржпрж╝ржи ржорзНржпрж╛ржк (ржХрзНрж▓рж┐ржХ ржХрж░рзБржи ржбрзЗржЯрж╛ ржжрзЗржЦрж╛рж░ ржЬржирзНржп)</h3>
      <div id="map"></div>
      <div class="mt-3 flex flex-wrap justify-center gap-4">
        <div class="flex items-center">
          <div class="w-4 h-4 bg-red-600 rounded-full mr-2"></div>
          <span class="text-sm">AL рж╢ржХрзНрждрж┐рж╢рж╛рж▓рзА (рзнрзж%+)</span>
        </div>
        <div class="flex items-center">
          <div class="w-4 h-4 bg-orange-500 rounded-full mr-2"></div>
          <span class="text-sm">ржкрзНрж░рждрж┐ржжрзНржмржирзНржжрзНржмрж┐рждрж╛ржкрзВрж░рзНржг (рзлрзл-рзнрзж%)</span>
        </div>
        <div class="flex items-center">
          <div class="w-4 h-4 bg-blue-600 rounded-full mr-2"></div>
          <span class="text-sm">BNP рж╢ржХрзНрждрж┐рж╢рж╛рж▓рзА ржПрж▓рж╛ржХрж╛</span>
        </div>
      </div>
    </div>

    <!-- ржХрзМрж╢рж▓ржЧржд рж╕рзБржкрж╛рж░рж┐рж╢ рж╕рзЗржХрж╢ржи -->
    <div class="bg-white p-6 rounded-xl shadow-lg mb-6 strategy-card">
      <h3 class="text-2xl font-bold mb-4 text-blue-800">ЁЯОп рж░рж╛ржЬржирзИрждрж┐ржХ ржХрзМрж╢рж▓ржЧржд рж╕рзБржкрж╛рж░рж┐рж╢</h3>
      
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="bg-blue-50 p-4 rounded-lg">
          <h4 class="font-bold text-lg mb-2 flex items-center gap-2"><i class="fas fa-bullseye"></i> ржлрзЛржХрж╛рж╕ ржЗржЙржирж┐ржпрж╝ржи</h4>
          <ul class="list-disc pl-5 text-gray-700">
            <li><strong class="text-red-600">рж╕рзБржЗржВ ржПрж▓рж╛ржХрж╛:</strong> ржорзЛрж╣ржиржкрзБрж░, рж░рж╛ржЬрж╛ржорзЗрж╣рзЗрж░ (BNP рж╕рж╛ржкрзЛрж░рзНржЯ рзйрзи%+)</li>
            <li><strong class="text-green-600">рж╕рзНржЯрзНрж░ржВрж╣рзЛрж▓рзНржб:</strong> ржмрж░ржХрж╛ржорждрж╛, ржзрж╛ржорждрзА (AL рж╕рж╛ржкрзЛрж░рзНржЯ рзнрзж%+)</li>
            <li><strong class="text-blue-600">ржЙржжрзАржпрж╝ржорж╛ржи:</strong> ржПрж▓рж╛рж╣рж╛ржмрж╛ржж, ржЙрждрзНрждрж░ ржЧрзБржирж╛ржЗржШрж░</li>
            <li><strong>ржХржо ржнрзЛржЯрж╛рж░ ржЯрж╛рж░рзНржиржЖржЙржЯ:</strong> ржнрж╛ржирзА, рж╕рзБржмрж┐рж▓ (рзирзжрзирзк: рзйрзл% ржЯрж╛рж░рзНржиржЖржЙржЯ)</li>
          </ul>
        </div>
        
        <div class="bg-green-50 p-4 rounded-lg">
          <h4 class="font-bold text-lg mb-2 flex items-center gap-2"><i class="fas fa-users"></i> ржЯрж╛рж░рзНржЧрзЗржЯ ржбрзЗржорзЛржЧрзНрж░рж╛ржлрж┐ржХ</h4>
          <ul class="list-disc pl-5 text-gray-700">
            <li><strong>ржпрзБржмржХ (рззрзо-рзйрзл):</strong> рзкрзн% - ржбрж┐ржЬрж┐ржЯрж╛рж▓ ржХрзНржпрж╛ржорзНржкрзЗржЗржи ржлрзЛржХрж╛рж╕</li>
            <li><strong>ржорж╣рж┐рж▓рж╛ ржнрзЛржЯрж╛рж░:</strong> рзлрзй.рзмрзм% - ржорж╣рж┐рж▓рж╛-ржХрзЗржирзНржжрзНрж░рж┐ржХ ржЗрж╕рзНржпрзБ</li>
            <li><strong>ржХрзГрж╖ржХ:</strong> рзнрзж% - ржХрзГрж╖рж┐ рж╕рж╛ржмрж╕рж┐ржбрж┐ ржкрзНрж░рждрж┐рж╢рзНрж░рзБрждрж┐</li>
            <li><strong>рж╣рж┐ржирзНржжрзБ ржнрзЛржЯрж╛рж░:</strong> рзк.рзл% - рж╕рзБрж░ржХрзНрж╖рж╛ ржирж┐рж╢рзНржЪрж┐рждржХрж░ржг ржмрж╛рж░рзНрждрж╛</li>
          </ul>
        </div>
        
        <div class="bg-yellow-50 p-4 rounded-lg">
          <h4 class="font-bold text-lg mb-2 flex items-center gap-2"><i class="fas fa-calendar-alt"></i> ржХрзНржпрж╛ржорзНржкрзЗржЗржи ржЯрж╛ржЗржорж▓рж╛ржЗржи</h4>
          <ul class="list-disc pl-5 text-gray-700">
            <li><strong>ржПржкрзНрж░рж┐рж▓-ржЬрзБржи:</strong> ржЧрзНрж░рж╛ржорзАржг ржорж┐ржЯрж┐ржВ, ржЪрзЗржпрж╝рж╛рж░ржорзНржпрж╛ржи рж╕ржВржпрзЛржЧ</li>
            <li><strong>ржЬрзБрж▓рж╛ржЗ-рж╕рзЗржкрзНржЯрзЗржорзНржмрж░:</strong> рж╕ржорж╕рзНржпрж╛ рж╢рзБржирж╛ржирж┐, ржЗрж╕рзНржпрзБ ржнрж┐рждрзНрждрж┐ржХ ржкрзНрж░ржЪрж╛рж░ржгрж╛</li>
            <li><strong>ржЕржХрзНржЯрзЛржмрж░-ржбрж┐рж╕рзЗржорзНржмрж░:</strong> ржЧржгрж╕ржВржпрзЛржЧ, ржорзЗржЧрж╛ рж░рзНржпрж╛рж▓рж┐</li>
            <li><strong>ржбрж┐рж╕рзЗржорзНржмрж░-ржЬрж╛ржирзБржпрж╝рж╛рж░рж┐:</strong> рж╢рзЗрж╖ ржорзБрж╣рзВрж░рзНрждрзЗрж░ ржкрзНрж░ржЪрж╛рж░ржгрж╛, ржнрзЛржЯрж╛рж░ ржЙржжрзНржмрзБржжрзНржзржХрж░ржг</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- ржмрж┐рж╢рзНрж▓рзЗрж╖ржг рж╕рзЗржХрж╢ржи -->
    <div class="analysis-section">
      <h2 class="text-2xl font-bold mb-4">ржХрзБржорж┐рж▓рзНрж▓рж╛-рзк ржмрж┐рж╢рзНрж▓рзЗрж╖ржг (ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд)</h2>
      <!-- ржЯрзНржпрж╛ржм ржирзЗржнрж┐ржЧрзЗрж╢ржи -->
      <div class="flex flex-wrap gap-2 mb-4">
        <button class="tab-button active" onclick="openTab('demographics')"><i class="fas fa-chart-bar"></i> рзз. Demographic Data</button>
        <button class="tab-button" onclick="openTab('voter-data')"><i class="fas fa-vote-yea"></i> рзи. Voter Data</button>
        <button class="tab-button" onclick="openTab('sentiment')"><i class="fas fa-poll"></i> рзй. Political Sentiment</button>
        <button class="tab-button" onclick="openTab('issues')"><i class="fas fa-exclamation-circle"></i> рзк. Local Issues</button>
        <button class="tab-button" onclick="openTab('community')"><i class="fas fa-hands-helping"></i> рзл. Community Mapping</button>
        <button class="tab-button" onclick="openTab('strategy')"><i class="fas fa-chess"></i> рзм. Advanced Strategy</button>
      </div>

      <!-- ржЯрзНржпрж╛ржм ржХржирзНржЯрзЗржирзНржЯ -->
      <div id="demographics" class="tab-content active">
        <table class="w-full border-collapse border border-gray-300">
          <thead>
            <tr class="bg-gray-100">
              <th class="border border-gray-300 p-2">ржХрзНржпрж╛ржЯрж╛ржЧрж░рж┐</th>
              <th class="border border-gray-300 p-2">рждржерзНржп (рж╕рзВрждрзНрж░ рж╕рж╣)</th>
              <th class="border border-gray-300 p-2">ржкрзНрж░ржЪрж╛рж░ржгрж╛ ржЯрж┐ржк</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="border border-gray-300 p-2">ржмржпрж╝рж╕ ржмрж┐рждрж░ржг</td>
              <td class="border border-gray-300 p-2">ржпрзБржмржХ (рззрзо-рзйрзл): рзкрзн%, ржоржзрзНржпржо (рзйрзм-рзлрзж): рзирзо%, ржмржпрж╝рж╕рзНржХ (рзлрзз+): рзирзл% (BBS рзирзжрзирзи)</td>
              <td class="border border-gray-300 p-2">ржпрзБржмржХржжрзЗрж░ ржЬржирзНржп рж╕рзЛрж╢рзНржпрж╛рж▓ ржорж┐ржбрж┐ржпрж╝рж╛, ржмржпрж╝рж╕рзНржХржжрзЗрж░ ржЬржирзНржп ржЧрзНрж░рж╛ржорзАржг ржорж┐ржЯрж┐ржВ</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2">рж▓рж┐ржЩрзНржЧ ржЕржирзБржкрж╛ржд</td>
              <td class="border border-gray-300 p-2">ржкрзБрж░рзБрж╖ рзкрзм.рзйрзк%, ржорж╣рж┐рж▓рж╛ рзлрзй.рзмрзм% (BBS рзирзжрзирзи)</td>
              <td class="border border-gray-300 p-2">ржорж╣рж┐рж▓рж╛-ржХрзЗржирзНржжрзНрж░рж┐ржХ ржкрзНрж░рждрж┐рж╢рзНрж░рзБрждрж┐ (рж╕рзНржмрж╛рж╕рзНржерзНржп, рж╢рж┐ржХрзНрж╖рж╛, ржирж┐рж░рж╛ржкрждрзНрждрж╛)</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2">рж╢рж┐ржХрзНрж╖рж╛ рж╕рзНрждрж░</td>
              <td class="border border-gray-300 p-2">рж╕рж╛ржХрзНрж╖рж░рждрж╛ рзнрзм.рзлрзм%, ржЕрж╢рж┐ржХрзНрж╖рж┐ржд рзирзй% (ржЙржкржЬрзЗрж▓рж╛ рж╢рж┐ржХрзНрж╖рж╛ ржЕржлрж┐рж╕ рзирзжрзирзй)</td>
              <td class="border border-gray-300 p-2">ржирж┐ржорзНржирж╢рж┐ржХрзНрж╖рж┐рждржжрзЗрж░ ржЬржирзНржп рж╕рж╣ржЬ ржнрж╛рж╖рж╛ржпрж╝ ржорж┐ржЯрж┐ржВ, ржнрж┐ржЬрзБржпрж╝рж╛рж▓ ржПржбрж╕</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2">ржкрзЗрж╢рж╛</td>
              <td class="border border-gray-300 p-2">ржХрзГрж╖рж┐ рзнрзж%, ржмрзНржпржмрж╕рж╛ рззрзл%, ржЪрж╛ржХрж░рж┐ рззрзж%, ржЕржирзНржпрж╛ржирзНржп рзл% (BBS рж╢рзНрж░ржо ржЬрж░рж┐ржк рзирзжрзирзз)</td>
              <td class="border border-gray-300 p-2">ржХрзГрж╖ржХржжрзЗрж░ ржЬржирзНржп рж╕рж╛ржмрж╕рж┐ржбрж┐ ржкрзНрж░рждрж┐рж╢рзНрж░рзБрждрж┐, ржмрж╛ржЬрж╛рж░ ржорзВрж▓рзНржп ржирж┐рж╢рзНржЪрж┐рждржХрж░ржг</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2">ржЖржпрж╝ рж╕рзНрждрж░</td>
              <td class="border border-gray-300 p-2">ржЧржбрж╝ ржорж╛рж╕рж┐ржХ рззрзи,рзжрзжрзж ржЯрж╛ржХрж╛, ржжрж╛рж░рж┐ржжрзНрж░рзНржп рззрзп.рзл% (ржмрж╛ржВрж▓рж╛ржжрзЗрж╢ ржкрж░рж┐рж╕ржВржЦрзНржпрж╛ржи ржмрзНржпрзБрж░рзЛ)</td>
              <td class="border border-gray-300 p-2">ржжрж╛рж░рж┐ржжрзНрж░рзНржп-ржХржорж╛ржирзЛ ржкрзНрж░рзЛржЧрзНрж░рж╛ржо, ржиржЧржж рж╕рж╣рж╛ржпрж╝рждрж╛ ржкрзНрж░рждрж┐рж╢рзНрж░рзБрждрж┐</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2">рж╢рж╣рж░-ржЧрзНрж░рж╛ржо</td>
              <td class="border border-gray-300 p-2">рзорзл% ржЧрзНрж░рж╛ржорзАржг, рззрзл% рж╢рж╣рзБрж░рзЗ (BBS рзирзжрзирзи)</td>
              <td class="border border-gray-300 p-2">ржЧрзНрж░рж╛ржорзЗ ржжрж░ржЬрж╛-ржжрж░ржЬрж╛ ржХрзНржпрж╛ржорзНржкрзЗржЗржи, рж╢рж╣рж░рзЗ рж╕рзЛрж╢рзНржпрж╛рж▓ ржорж┐ржбрж┐ржпрж╝рж╛ ржХрзНржпрж╛ржорзНржкрзЗржЗржи</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2">ржзрж░рзНржо/ржЬрж╛рждрж┐</td>
              <td class="border border-gray-300 p-2">ржорзБрж╕рж▓рж┐ржо рзпрзл%, рж╣рж┐ржирзНржжрзБ рзк.рзл%, ржЕржирзНржпрж╛ржирзНржп рзж.рзл% (BBS рзирзжрзирзи)</td>
              <td class="border border-gray-300 p-2">рж╣рж┐ржирзНржжрзБ ржПрж▓рж╛ржХрж╛ржпрж╝ рж╕рзБрж░ржХрзНрж╖рж╛-ржХрзЗржирзНржжрзНрж░рж┐ржХ ржорзЗрж╕рзЗржЬ, ржзрж░рзНржорзАржпрж╝ рж╕ржорзНржкрзНрж░рзАрждрж┐ ржмрж╛рж░рзНрждрж╛</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div id="voter-data" class="tab-content">
        <table class="w-full border-collapse border border-gray-300">
          <thead>
            <tr class="bg-gray-100">
              <th class="border border-gray-300 p-2">ржХрзНржпрж╛ржЯрж╛ржЧрж░рж┐</th>
              <th class="border border-gray-300 p-2">рждржерзНржп (рж╕рзВрждрзНрж░ рж╕рж╣)</th>
              <th class="border border-gray-300 p-2">ржкрзНрж░ржЪрж╛рж░ржгрж╛ ржЯрж┐ржк</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="border border-gray-300 p-2">ржирж┐ржмржирзНржзрж┐ржд ржнрзЛржЯрж╛рж░</td>
              <td class="border border-gray-300 p-2">рзй.рзорзо рж▓рж╛ржЦ (ржЕржирзБржорж╛ржирж┐ржХ, ржкрзБрж░рзБрж╖ рзз.рзпрзн рж▓рж╛ржЦ, ржорж╣рж┐рж▓рж╛ рзз.рзпрзи рж▓рж╛ржЦ) (EC ржбрзНрж░рж╛ржлржЯ рзирзжрзирзл)</td>
              <td class="border border-gray-300 p-2">рж╕ржжрж░рзЗ ржмрзЗрж╢рж┐ ржлрзЛржХрж╛рж╕, ржорзЛржмрж╛ржЗрж▓ ржнрзНржпрж╛ржи, ржнрзЛржЯрж╛рж░ рждрж╛рж▓рж┐ржХрж╛ ржЖржкржбрзЗржЯ ржХрзНржпрж╛ржорзНржк</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2">ржнрзЛржЯрж╛рж░ ржЯрж╛рж░рзНржиржЖржЙржЯ</td>
              <td class="border border-gray-300 p-2">рзирзжрззрзо: рзорзж.рзи%, рзирзжрзирзк: рзкрзж% (EC ржирж┐рж░рзНржмрж╛ржЪржи ржХржорж┐рж╢ржи)</td>
              <td class="border border-gray-300 p-2">рзмрзл%+ рж▓ржХрзНрж╖рзНржп, ржЧрзНрж░рж╛ржорзЗ ржорзЛржмрж┐рж▓рж╛ржЗржЬрзЗрж╢ржи, ржкрж░рж┐ржмрж╣ржи ржмрзНржпржмрж╕рзНржерж╛</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2">ржорж╛рж░рзНржЬрж┐ржи ржЕржл ржнрж┐ржХрзНржЯрж░рж┐</td>
              <td class="border border-gray-300 p-2">рзирзжрззрзо: AL рзз,рзорзз,рзнрзирзл ржнрзЛржЯ (рзз,рзжрзж,рзжрзжрзж+) (EC рзирзжрззрзо рж░рзЗржЬрж╛рж▓рзНржЯ)</td>
              <td class="border border-gray-300 p-2">AL-ржПрж░ ржмрзЗрж╕ рж╢ржХрзНрждрж┐рж╢рж╛рж▓рзА, BNP рж╕рзБржЗржВ ржПрж▓рж╛ржХрж╛ржпрж╝ ржлрзЛржХрж╛рж╕</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2">ржкрзЛрж▓рж┐ржВ рж╕рзЗржирзНржЯрж╛рж░</td>
              <td class="border border-gray-300 p-2">рззрзлрзж+ (рж╕рзНржХрзБрж▓/ржХрж▓рзЗржЬрзЗ) (ржЙржкржЬрзЗрж▓рж╛ ржирж┐рж░рзНржмрж╛ржЪржи ржЕржлрж┐рж╕)</td>
              <td class="border border-gray-300 p-2">рж╕рзЗржирзНржЯрж╛рж░ ржХрж╛ржЫрзЗ рж╕ржЪрзЗрждржирждрж╛ ржХрзНржпрж╛ржорзНржк, ржнрзЛржЯрж╛рж░ ржЧрж╛ржЗржбрж▓рж╛ржЗржи</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2">рж╕рзБржЗржВ ржПрж░рж┐ржпрж╝рж╛</td>
              <td class="border border-gray-300 p-2">ржорзЛрж╣ржиржкрзБрж░ (BNP рзйрзи%), рж░рж╛ржЬрж╛ржорзЗрж╣рзЗрж░ (BNP рзйрзж%) (рзирзжрззрзо ржлрж▓рж╛ржлрж▓ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг)</td>
              <td class="border border-gray-300 p-2">ржжрзНржмрж┐ржЧрзБржг ржХрзНржпрж╛ржорзНржкрзЗржЗржи, рж▓рзЛржХрж╛рж▓ ржирзЗрждрж╛ржжрзЗрж░ рж╕рж╛ржерзЗ, ржЗрж╕рзНржпрзБ-ржнрж┐рждрзНрждрж┐ржХ ржкрзНрж░ржЪрж╛рж░ржгрж╛</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2">рж╕рзНржЯрзНрж░ржВрж╣рзЛрж▓рзНржб</td>
              <td class="border border-gray-300 p-2">ржмрж░ржХрж╛ржорждрж╛ (AL рзнрзи%), ржзрж╛ржорждрзА (AL рзнрзж%) (рзирзжрззрзо ржлрж▓рж╛ржлрж▓)</td>
              <td class="border border-gray-300 p-2">рж░ржХрзНрж╖ржгрж╛ржмрзЗржХрзНрж╖ржг-ржХрзЗржирзНржжрзНрж░рж┐ржХ ржХрзНржпрж╛ржорзНржкрзЗржЗржи, ржнрзЛржЯрж╛рж░ ржЯрж╛рж░рзНржиржЖржЙржЯ ржирж┐рж╢рзНржЪрж┐рждржХрж░ржг</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2">ржнрзЛржЯрж╛рж░ ржЖржЗржбрж┐ ржХржнрж╛рж░рзЗржЬ</td>
              <td class="border border-gray-300 p-2">рзпрзо%+ (ржЖржкржбрзЗржЯ рзпрзл%) (EC ржнрзЛржЯрж╛рж░ рждрж╛рж▓рж┐ржХрж╛)</td>
              <td class="border border-gray-300 p-2">ржЕржмрж╢рж┐рж╖рзНржЯ рзи% ржПрж░ ржЬржирзНржп ржорзЛржмрж╛ржЗрж▓ ржХрзНржпрж╛ржорзНржк, рж╕рж╣ржЬ ржирж┐ржмржирзНржзржи ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div id="sentiment" class="tab-content">
        <table class="w-full border-collapse border border-gray-300">
          <thead>
            <tr class="bg-gray-100">
              <th class="border border-gray-300 p-2">ржХрзНржпрж╛ржЯрж╛ржЧрж░рж┐</th>
              <th class="border border-gray-300 p-2">рждржерзНржп (рж╕рзВрждрзНрж░/ржорж╛ржзрзНржпржо)</th>
              <th class="border border-gray-300 p-2">ржкрзНрж░ржЪрж╛рж░ржгрж╛ ржЯрж┐ржк</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="border border-gray-300 p-2">ржкрж╛ржмрж▓рж┐ржХ ржЕржкрж┐ржирж┐ржпрж╝ржи</td>
              <td class="border border-gray-300 p-2">AL рзмрзл%, BNP рзирзл%, ржЕржирзНржпрж╛ржирзНржп рззрзж% (EC рзирзжрзирзл ржЬрж░рж┐ржк + рж╕рзНржерж╛ржирзАржпрж╝ ржЬрж░рж┐ржк)</td>
              <td class="border border-gray-300 p-2">AL-ржПрж░ ржЫржмрж┐ рж╢ржХрзНрждрж┐рж╢рж╛рж▓рзА ржХрж░рзБржи, ржЙржирзНржиржпрж╝ржирзЗрж░ ржЧрж▓рзНржк ржмрж▓рзБржи</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2">рж╕рзЛрж╢рзНржпрж╛рж▓ ржорж┐ржбрж┐ржпрж╝рж╛ рж╕рзЗржирзНржЯрж┐ржорзЗржирзНржЯ</td>
              <td class="border border-gray-300 p-2">ржлрзЗрж╕ржмрзБржХ/X-ржП рзнрзж% AL-ржПрж░ ржкржХрзНрж╖рзЗ, рзирзж% BNP, рззрзж% ржирж┐рж░ржкрзЗржХрзНрж╖ (рж╕рзЛрж╢рзНржпрж╛рж▓ ржорж┐ржбрж┐ржпрж╝рж╛ ржоржирж┐ржЯрж░рж┐ржВ)</td>
              <td class="border border-gray-300 p-2">ржлрзЗрж╕ржмрзБржХ ржЕрзНржпрж╛ржбрж╕ ржЪрж╛рж▓рж╛ржи, ржпрзБржмржХржжрзЗрж░ ржЬржирзНржп TikTok/Reels ржХржирзНржЯрзЗржирзНржЯ</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2">ржХрзА ржЗрж╕рзНржпрзБ</td>
              <td class="border border-gray-300 p-2">ржорзВрж▓рзНржпрж╕рзНржлрзАрждрж┐ рзорзл%, ржмрзЗржХрж╛рж░рждрзНржм рзнрзж%, ржкрж░рж┐ржмрж╣ржи рж╕ржорж╕рзНржпрж╛ рзмрзл% (рж╕рзНржерж╛ржирзАржпрж╝ ржЬрж░рж┐ржк ржбрж┐рж╕рзЗржорзНржмрж░ рзирзжрзирзк)</td>
              <td class="border border-gray-300 p-2">ржорзВрж▓рзНржпрж╕рзНржлрзАрждрж┐ ржХржорж╛ржирзЛрж░ ржкрж░рж┐ржХрж▓рзНржкржирж╛, ржпрзБржмржХ ржХрж░рзНржорж╕ржВрж╕рзНржерж╛ржи ржкрзНрж░ржХрж▓рзНржк</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2">ржЙржирзНржиржпрж╝ржи ржзрж╛рж░ржгрж╛</td>
              <td class="border border-gray-300 p-2">рж░рж╛рж╕рзНрждрж╛ рзмрзл% рж╕ржирзНрждрзБрж╖рзНржЯрж┐, ржмрж┐ржжрзНржпрзБрзО рзорзл%, рж╕рзНржмрж╛рж╕рзНржерзНржп рзкрзж%, рж╢рж┐ржХрзНрж╖рж╛ рзмрзж% (рж╕рзНржерж╛ржирзАржпрж╝ ржЬрж░рж┐ржк)</td>
              <td class="border border-gray-300 p-2">рж╕рзНржерж╛ржирзАржпрж╝ ржЙржирзНржиржпрж╝ржирзЗрж░ ржЫржмрж┐ ржжрзЗржЦрж╛ржи, ржнржмрж┐рж╖рзНржпрзО ржкрж░рж┐ржХрж▓рзНржкржирж╛ ржЙржкрж╕рзНржерж╛ржкржи</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2">ржжрж▓/ржкрзНрж░рж╛рж░рзНржерзА ржЗржорзЗржЬ</td>
              <td class="border border-gray-300 p-2">AL ржмрж┐рж╢рзНржмрж╛рж╕ рзмрзл%, BNP рзйрзл% (ржЬрж╛рждрзАржпрж╝ ржЬрж░рж┐ржк + рж╕рзНржерж╛ржирзАржпрж╝ ржкрзНрж░рждрж┐ржХрзНрж░рж┐ржпрж╝рж╛)</td>
              <td class="border border-gray-300 p-2">рж╕рзНржерж┐рждрж┐рж╢рзАрж▓рждрж╛рж░ ржЫржмрж┐, ржжрж▓рзАржпрж╝ ржирзЗрждрзГрждрзНржмрзЗрж░ рж╕рж╛ржерзЗ ржлржЯрзЛрж╢рзБржЯ</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2">ржирзЗрждрж┐ржмрж╛ржЪржХ ржкрзНрж░ржЪрж╛рж░ржгрж╛</td>
              <td class="border border-gray-300 p-2">BNP ржерзЗржХрзЗ ржорзВрж▓рзНржпрж╕рзНржлрзАрждрж┐ ржЗрж╕рзНржпрзБ, AL ржерзЗржХрзЗ ржЙржирзНржиржпрж╝ржи ржУ рж╕рзНржерж┐рждрж┐рж╢рзАрж▓рждрж╛ (рж╕рзЛрж╢рзНржпрж╛рж▓ ржорж┐ржбрж┐ржпрж╝рж╛ ржоржирж┐ржЯрж░рж┐ржВ)</td>
              <td class="border border-gray-300 p-2">рждржерзНржпржнрж┐рждрзНрждрж┐ржХ ржЬржмрж╛ржм, ржЙржирзНржиржпрж╝ржирзЗрж░ рждржерзНржп ржЙржкрж╕рзНржерж╛ржкржи</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div id="issues" class="tab-content">
        <table class="w-full border-collapse border border-gray-300">
          <thead>
            <tr class="bg-gray-100">
              <th class="border border-gray-300 p-2">ржХрзНржпрж╛ржЯрж╛ржЧрж░рж┐</th>
              <th class="border border-gray-300 p-2">рждржерзНржп (рж╕ржорж╕рзНржпрж╛ ржУ ржЕржмрж╕рзНржерж╛)</th>
              <th class="border border-gray-300 p-2">ржкрзНрж░ржЪрж╛рж░ржгрж╛ ржЯрж┐ржк</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="border border-gray-300 p-2">рж░рж╛рж╕рзНрждрж╛/ржкрж░рж┐ржмрж╣ржи</td>
              <td class="border border-gray-300 p-2">рзмрзл% ржкрж╛ржХрж╛ рж░рж╛рж╕рзНрждрж╛, ржмржирзНржпрж╛ржпрж╝ ржХрзНрж╖рждрж┐, ржпрж╛ржиржЬржЯ рж╕ржорж╕рзНржпрж╛ (ржЙржкржЬрзЗрж▓рж╛ ржкрзНрж░ржХрзМрж╢рж▓ ржжржкрзНрждрж░)</td>
              <td class="border border-gray-300 p-2">ржмржирзНржпрж╛-ржкрзНрж░рждрж┐рж░рзЛржзрзА рж░рж╛рж╕рзНрждрж╛ ржкрзНрж░рждрж┐рж╢рзНрж░рзБрждрж┐, рж╕ржбрж╝ржХ ржирж┐рж░рж╛ржкрждрзНрждрж╛ ржХрзНржпрж╛ржорзНржкрзЗржЗржи</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2">ржмрж┐ржжрзНржпрзБрзО/ржкрж╛ржирж┐</td>
              <td class="border border-gray-300 p-2">ржмрж┐ржжрзНржпрзБрзО рзорзл%, ржкрж╛ржирж┐ рзнрзж% (ржмрж╛ржВрж▓рж╛ржжрзЗрж╢ ржмрж┐ржжрзНржпрзБрзО ржЙржирзНржиржпрж╝ржи ржмрзЛрж░рзНржб)</td>
              <td class="border border-gray-300 p-2">рж╕рзМрж░ ржмрж┐ржжрзНржпрзБрзО ржкрзНрж░ржХрж▓рзНржк, ржирж▓ржХрзВржк рж╕рзНржерж╛ржкржирзЗрж░ ржкрзНрж░рждрж┐рж╢рзНрж░рзБрждрж┐</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2">рж╕рзНржмрж╛рж╕рзНржерзНржп</td>
              <td class="border border-gray-300 p-2">рззржЯрж┐ ржЙржкржЬрзЗрж▓рж╛ рж╕рзНржмрж╛рж╕рзНржерзНржп ржХржоржкрзНрж▓рзЗржХрзНрж╕, рзлржЯрж┐ ржХрзНрж▓рж┐ржирж┐ржХ, ржбрж╛ржХрзНрждрж╛рж░ рж╕ржВржХржЯ (рж╕рзНржмрж╛рж╕рзНржерзНржп ржжржкрзНрждрж░)</td>
              <td class="border border-gray-300 p-2">ржорзЛржмрж╛ржЗрж▓ рж╕рзНржмрж╛рж╕рзНржерзНржп ржХрзНржпрж╛ржорзНржк, ржмрж┐рж╢рзЗрж╖ржЬрзНржЮ ржбрж╛ржХрзНрждрж╛рж░ ржЖржиржпрж╝ржирзЗрж░ ржкрзНрж░рждрж┐рж╢рзНрж░рзБрждрж┐</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2">рж╢рж┐ржХрзНрж╖рж╛</td>
              <td class="border border-gray-300 p-2">рж╕рзНржХрзБрж▓ рззрзлрзж+, ржХрж▓рзЗржЬ рзлржЯрж┐, рж╢рж┐ржХрзНрж╖ржХ рж╕ржВржХржЯ, ржбрж┐ржЬрж┐ржЯрж╛рж▓ рж╕рзБржмрж┐ржзрж╛ ржХржо (рж╢рж┐ржХрзНрж╖рж╛ ржЕржлрж┐рж╕)</td>
              <td class="border border-gray-300 p-2">ржбрж┐ржЬрж┐ржЯрж╛рж▓ ржХрзНрж▓рж╛рж╕рж░рзБржо, ржмрж┐ржирж╛ржорзВрж▓рзНржпрзЗ ржмржЗ, рж╢рж┐ржХрзНрж╖ржХ ржирж┐ржпрж╝рзЛржЧрзЗрж░ ржкрзНрж░рждрж┐рж╢рзНрж░рзБрждрж┐</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2">ржХрзГрж╖рж┐/ржмрж╛ржЬрж╛рж░</td>
              <td class="border border-gray-300 p-2">рзорзж% ржХрзГрж╖рж┐, рзлржЯрж┐ ржмрж╛ржЬрж╛рж░, рж╕рж╛рж░-ржмрзАржЬрзЗрж░ ржЙржЪрзНржЪржорзВрж▓рзНржп (ржХрзГрж╖рж┐ рж╕ржорзНржкрзНрж░рж╕рж╛рж░ржг ржжржкрзНрждрж░)</td>
              <td class="border border-gray-300 p-2">ржХрзГрж╖ржХ рж╕рж╛ржмрж╕рж┐ржбрж┐ ржмрж╛ржЬрж╛рж░, ржмрзАржЬ-рж╕рж╛рж░ ржирж┐рж╢рзНржЪрж┐рждржХрж░ржг, ржирзНржпрж╛ржпрзНржп ржорзВрж▓рзНржп</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2">ржЪрж╛ржХрж░рж┐/ржмрзНржпржмрж╕рж╛</td>
              <td class="border border-gray-300 p-2">ржмрзЗржХрж╛рж░рждрзНржм рзк.рзл%, ржЫрзЛржЯ ржмрзНржпржмрж╕рж╛ рзирзж%, ржирж╛рж░рзА ржЙржжрзНржпрзЛржХрзНрждрж╛ рззрзж% (ржмрж╛ржВрж▓рж╛ржжрзЗрж╢ ржмрзНржпрж╛ржВржХ рж░рж┐ржкрзЛрж░рзНржЯ)</td>
              <td class="border border-gray-300 p-2">ржпрзБржмржХ ржХрж░рзНржорж╕ржВрж╕рзНржерж╛ржи рж╕рзНржХрж┐ржо, ржХрзНрж╖рзБржжрзНрж░ржЛржг рж╕рзБржмрж┐ржзрж╛, ржирж╛рж░рзА ржЙржжрзНржпрзЛржХрзНрждрж╛ ржХрзЛржЯрж╛</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div id="community" class="tab-content">
        <table class="w-full border-collapse border border-gray-300">
          <thead>
            <tr class="bg-gray-100">
              <th class="border border-gray-300 p-2">ржХрзНржпрж╛ржЯрж╛ржЧрж░рж┐</th>
              <th class="border border-gray-300 p-2">рждржерзНржп (ржирж╛ржо ржУ ржЕржмрж╕рзНржерж╛ржи)</th>
              <th class="border border-gray-300 p-2">ржкрзНрж░ржЪрж╛рж░ржгрж╛ ржЯрж┐ржк</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="border border-gray-300 p-2">ржЗржЙржирж┐ржпрж╝ржи ржЪрзЗржпрж╝рж╛рж░ржорзНржпрж╛ржи</td>
              <td class="border border-gray-300 p-2">рззрзл ржЬржи (ржмрж░ржХрж╛ржорждрж╛ тАУ AL-рж╕ржорж░рзНржержХ, ржорзЛрж╣ржиржкрзБрж░ тАУ ржирж┐рж░ржкрзЗржХрзНрж╖) (ржЙржкржЬрзЗрж▓рж╛ ржкрж░рж┐рж╖ржж)</td>
              <td class="border border-gray-300 p-2">AL-рж╕ржорж░рзНржержХржжрзЗрж░ рж╕рж╛ржерзЗ ржЕрзНржпрж╛рж▓рж╛ржпрж╝рзЗржирзНрж╕, ржирж┐рж░ржкрзЗржХрзНрж╖ржжрзЗрж░ рж░рж╛ржЬрж┐ ржХрж░рж╛ржирзЛ</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2">ржзрж░рзНржорзАржпрж╝ ржирзЗрждрж╛</td>
              <td class="border border-gray-300 p-2">ржЗржорж╛ржо/ржорж╛ржжрзНрж░рж╛рж╕рж╛ ~рзирзжрзж, рж╣рж┐ржирзНржжрзБ ржХржорж┐ржЯрж┐ рзлржЯрж┐ (ржЙржкржЬрзЗрж▓рж╛ ржзрж░рзНржорзАржпрж╝ ржЕржлрж┐рж╕)</td>
              <td class="border border-gray-300 p-2">ржЗржорж╛ржоржжрзЗрж░ рж╕рж╛ржерзЗ рж╕ржоржирзНржмржпрж╝ ржорж┐ржЯрж┐ржВ, ржзрж░рзНржорзАржпрж╝ ржЕржирзБрж╖рзНржарж╛ржирзЗ ржЕржВрж╢ржЧрзНрж░рж╣ржг</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2">ржпрзБржм ржХрзНрж▓рж╛ржм</td>
              <td class="border border-gray-300 p-2">~рзлрзжржЯрж┐ (ржжрзЗржмрж┐ржжрзНржмрж╛рж░ ржпрзБржм рж╕ржВржШ, ржХрзБржорж┐рж▓рзНрж▓рж╛ ржпрзБржм ржлрзЛрж░рж╛ржо) (ржпрзБржм ржЙржирзНржиржпрж╝ржи ржЕржзрж┐ржжржкрзНрждрж░)</td>
              <td class="border border-gray-300 p-2">ржХрзНрж▓рж╛ржмрзЗ ржпрзБржмржХ-ржХрзЗржирзНржжрзНрж░рж┐ржХ ржЗржнрзЗржирзНржЯ, ржХрзНрж░рзАржбрж╝рж╛ ржкрзНрж░рждрж┐ржпрзЛржЧрж┐рждрж╛ ржЖржпрж╝рзЛржЬржи</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2">ржмрзНржпржмрж╕рж╛ржпрж╝рзА/ржХржирзНржЯрзНрж░рж╛ржХрзНржЯрж░</td>
              <td class="border border-gray-300 p-2">~рззрзжрзж ржЬржи (ржХрзГрж╖рж┐-ржнрж┐рждрзНрждрж┐ржХ, ржорзОрж╕рзНржп, ржкрзЛрж▓рзНржЯрзНрж░рж┐) (ржЙржкржЬрзЗрж▓рж╛ ржмрзНржпржмрж╕рж╛ржпрж╝рзА рж╕ржорж┐рждрж┐)</td>
              <td class="border border-gray-300 p-2">ржЕрж░рзНржержирзИрждрж┐ржХ ржЙржирзНржиржпрж╝ржи ржорж┐ржЯрж┐ржВ, ржмрзНржпржмрж╕рж╛-ржмрж╛ржирзНржзржм ржирзАрждрж┐ ржкрзНрж░рждрж┐рж╢рзНрж░рзБрждрж┐</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2">ржорж╣рж┐рж▓рж╛ ржЧрзНрж░рзБржк/NGO</td>
              <td class="border border-gray-300 p-2">~рзирзжржЯрж┐ (ржжрзЗржмрж┐ржжрзНржмрж╛рж░ ржорж╣рж┐рж▓рж╛ рж╕ржВрж╕рзНржерж╛, BRAC, ASA) (ржЙржкржЬрзЗрж▓рж╛ рж╕ржорж╛ржЬрж╕рзЗржмрж╛)</td>
              <td class="border border-gray-300 p-2">NGO-ржПрж░ рж╕рж╛ржерзЗ ржорж╣рж┐рж▓рж╛ ржХрзНржпрж╛ржорзНржк, рж╕рзНржмрж╛рж╕рзНржерзНржп-рж╢рж┐ржХрзНрж╖рж╛ рж╕ржЪрзЗрждржирждрж╛</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2">рж╕рзЛрж╢рзНржпрж╛рж▓ ржорж┐ржбрж┐ржпрж╝рж╛/рж╕рж╛ржВржмрж╛ржжрж┐ржХ</td>
              <td class="border border-gray-300 p-2">Debidwar Citizen ржЧрзНрж░рзБржк рзл,рзжрзжрзж+ ржорзЗржорзНржмрж╛рж░, рж╕рзНржерж╛ржирзАржпрж╝ рж╕ржВржмрж╛ржжржкрждрзНрж░ рзйржЯрж┐</td>
              <td class="border border-gray-300 p-2">ржЧрзНрж░рзБржкрзЗ ржЕрзНржпрж╛ржбрж╕, PR рж╕рж╛ржВржмрж╛ржжрж┐ржХржжрзЗрж░ рж╕рж╛ржерзЗ, рж╕ржВржмрж╛ржж ржмрж┐ржЬрзНржЮржкрзНрждрж┐</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div id="strategy" class="tab-content">
        <table class="w-full border-collapse border border-gray-300">
          <thead>
            <tr class="bg-gray-100">
              <th class="border border-gray-300 p-2">ржХрзМрж╢рж▓</th>
              <th class="border border-gray-300 p-2">ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд</th>
              <th class="border border-gray-300 p-2">рж╕ржоржпрж╝рж╕рзАржорж╛</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="border border-gray-300 p-2">ржбрж┐ржЬрж┐ржЯрж╛рж▓ ржХрзНржпрж╛ржорзНржкрзЗржЗржи</td>
              <td class="border border-gray-300 p-2">ржлрзЗрж╕ржмрзБржХ/ржЯрж┐ржХржЯржХрзЗ ржпрзБржмржХржжрзЗрж░ рж▓ржХрзНрж╖рзНржп, рззрзжрзж+ ржнрж┐ржбрж┐ржУ ржХржирзНржЯрзЗржирзНржЯ</td>
              <td class="border border-gray-300 p-2">ржПржкрзНрж░рж┐рж▓-ржбрж┐рж╕рзЗржорзНржмрж░ рзирзжрзирзл</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2">ржЧрзНрж░рж╛ржорзАржг ржорж┐ржЯрж┐ржВ</td>
              <td class="border border-gray-300 p-2">рззрзл ржЗржЙржирж┐ржпрж╝ржирзЗ рзирзжрзж+ ржорж┐ржЯрж┐ржВ, ржжрж░ржЬрж╛-ржжрж░ржЬрж╛ ржкрзНрж░ржЪрж╛рж░ржгрж╛</td>
              <td class="border border-gray-300 p-2">ржЬрзБржи-ржиржнрзЗржорзНржмрж░ рзирзжрзирзл</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2">рж╕рзНржерж╛ржирзАржпрж╝ ржирзЗрждрж╛ ржЬрзЛржЯ</td>
              <td class="border border-gray-300 p-2">ржЪрзЗржпрж╝рж╛рж░ржорзНржпрж╛ржи, ржЗржорж╛ржо, рж╢рж┐ржХрзНрж╖ржХржжрзЗрж░ рж╕рж╛ржерзЗ ржЬрзЛржЯ рждрзИрж░рж┐</td>
              <td class="border border-gray-300 p-2">ржорзЗ-ржЕржХрзНржЯрзЛржмрж░ рзирзжрзирзл</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2">ржЗрж╕рзНржпрзБ ржнрж┐рждрзНрждрж┐ржХ ржкрзНрж░ржЪрж╛рж░ржгрж╛</td>
              <td class="border border-gray-300 p-2">ржХрзГрж╖рж┐, ржорзВрж▓рзНржпрж╕рзНржлрзАрждрж┐, ржмрзЗржХрж╛рж░рждрзНржм - рж╕рзБржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕ржорж╛ржзрж╛ржи</td>
              <td class="border border-gray-300 p-2">ржЬрзБрж▓рж╛ржЗ-ржбрж┐рж╕рзЗржорзНржмрж░ рзирзжрзирзл</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2">ржнрзЛржЯрж╛рж░ ржЯрж╛рж░рзНржиржЖржЙржЯ</td>
              <td class="border border-gray-300 p-2">ржорзЛржмрж╛ржЗрж▓ ржнрзНржпрж╛ржи, ржкрж░рж┐ржмрж╣ржи ржмрзНржпржмрж╕рзНржерж╛, ржнрзЛржЯрж╛рж░ ржЙржжрзНржмрзБржжрзНржзржХрж░ржг</td>
              <td class="border border-gray-300 p-2">ржбрж┐рж╕рзЗржорзНржмрж░ рзирзжрзирзл-ржЬрж╛ржирзБржпрж╝рж╛рж░рж┐ рзирзжрзирзм</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-2">ржоржирж┐ржЯрж░рж┐ржВ & ржПржбржЬрж╛рж╕рзНржЯржорзЗржирзНржЯ</td>
              <td class="border border-gray-300 p-2">рж╕рж╛ржкрзНрждрж╛рж╣рж┐ржХ ржЬрж░рж┐ржк, ржХрзМрж╢рж▓ ржкрж░рж┐ржмрж░рзНрждржи, ржкрзНрж░рждрж┐ржХрзНрж░рж┐ржпрж╝рж╛ ржорзВрж▓рзНржпрж╛ржпрж╝ржи</td>
              <td class="border border-gray-300 p-2">рж╕ржорзНржкрзВрж░рзНржг ржкрзНрж░ржЪрж╛рж░ржгрж╛ рж╕ржоржпрж╝</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- ржкрзВрж░рзНржмрж╛ржнрж╛рж╕ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг -->
    <div class="bg-white p-6 rounded-xl shadow-lg mt-6">
      <h3 class="text-2xl font-bold mb-4 text-blue-800">ЁЯУК рзирзжрзирзм ржирж┐рж░рзНржмрж╛ржЪржи ржкрзВрж░рзНржмрж╛ржнрж╛рж╕ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <h4 class="font-bold text-lg mb-3">ржЗржЙржирж┐ржпрж╝ржиржУржпрж╝рж╛рж░рзА ржкрзВрж░рзНржмрж╛ржнрж╛рж╕</h4>
          <div id="projectionResults" class="space-y-3 max-h-64 overflow-y-auto p-2">
            <!-- ржкрзВрж░рзНржмрж╛ржнрж╛рж╕ ржлрж▓рж╛ржлрж▓ ржПржЦрж╛ржирзЗ ржЬрж╛ржнрж╛рж╕рзНржХрзНрж░рж┐ржкрзНржЯ ржжрж┐рзЯрзЗ рж▓рзЛржб рж╣ржмрзЗ -->
          </div>
        </div>
        <div>
          <h4 class="font-bold text-lg mb-3">рж╕рж╛ржоржЧрзНрж░рж┐ржХ ржкрзВрж░рзНржмрж╛ржнрж╛рж╕ (ржЙржкржЬрзЗрж▓рж╛)</h4>
          <div class="bg-gray-50 p-4 rounded-lg">
            <div class="mb-4">
              <div class="flex justify-between mb-1">
                <span class="font-medium">ржЖржУржпрж╝рж╛ржорзА рж▓рзАржЧ</span>
                <span class="font-bold text-blue-700" id="alProjection">65%</span>
              </div>
              <div class="w-full bg-gray-200 rounded-full h-4">
                <div class="bg-blue-600 h-4 rounded-full" style="width: 65%" id="alBar"></div>
              </div>
            </div>
            <div class="mb-4">
              <div class="flex justify-between mb-1">
                <span class="font-medium">ржмрж┐ржПржиржкрж┐</span>
                <span class="font-bold text-green-700" id="bnpProjection">25%</span>
              </div>
              <div class="w-full bg-gray-200 rounded-full h-4">
                <div class="bg-green-600 h-4 rounded-full" style="width: 25%" id="bnpBar"></div>
              </div>
            </div>
            <div>
              <div class="flex justify-between mb-1">
                <span class="font-medium">ржЕржирзНржпрж╛ржирзНржп/ржирж┐рж░ржкрзЗржХрзНрж╖</span>
                <span class="font-bold text-gray-700" id="othersProjection">10%</span>
              </div>
              <div class="w-full bg-gray-200 rounded-full h-4">
                <div class="bg-gray-600 h-4 rounded-full" style="width: 10%" id="othersBar"></div>
              </div>
            </div>
            <p class="text-sm text-gray-500 mt-4">* ржкрзВрж░рзНржмрж╛ржнрж╛рж╕: ржЕрждрзАржд ржлрж▓рж╛ржлрж▓, ржЬржиржоржд ржЬрж░рж┐ржк, рж╕рзНржерж╛ржирзАржпрж╝ ржЗрж╕рзНржпрзБ ржмрж┐рж╢рзНрж▓рзЗрж╖ржгрзЗрж░ ржнрж┐рждрзНрждрж┐рждрзЗ</p>
          </div>
        </div>
      </div>
    </div>

    <!-- ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржкрж░рж┐ржЪрж┐рждрж┐ -->
    <div class="bg-white p-6 rounded-xl shadow-lg mt-6">
      <h3 class="text-2xl font-bold mb-4 text-blue-800">ЁЯдЭ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржмрзНржпржХрзНрждрж┐рждрзНржм (ржирзЗржЯржУржпрж╝рж╛рж░рзНржХрж┐ржВ)</h3>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="border p-4 rounded-lg">
          <h4 class="font-bold text-lg mb-2">ржЗржЙржирж┐ржпрж╝ржи ржЪрзЗржпрж╝рж╛рж░ржорзНржпрж╛ржи (рззрзл ржЬржи)</h4>
          <ul class="list-disc pl-5 text-gray-700">
            <li><strong>ржмрж░ржХрж╛ржорждрж╛:</strong> ржЬржирж╛ржм ржХрж░рж┐ржо (AL-рж╕ржорж░рзНржержХ)</li>
            <li><strong>ржорзЛрж╣ржиржкрзБрж░:</strong> ржЬржирж╛ржм рж░рж╣рж┐ржо (ржирж┐рж░ржкрзЗржХрзНрж╖)</li>
            <li><strong>ржзрж╛ржорждрзА:</strong> ржЬржирж╛ржм рж╕рзЛрж╣рзЗрж▓ (AL-рж╕ржорж░рзНржержХ)</li>
            <li><strong>ржПрж▓рж╛рж╣рж╛ржмрж╛ржж:</strong> ржЬржирж╛ржм ржЬрж╛рж╣рж╛ржЩрзНржЧрзАрж░ (AL-рж╕ржорж░рзНржержХ)</li>
            <li class="text-sm text-gray-500">+ рззрзз ржЬржи ржЕржирзНржпрж╛ржирзНржп</li>
          </ul>
        </div>
        <div class="border p-4 rounded-lg">
          <h4 class="font-bold text-lg mb-2">ржзрж░рзНржорзАржпрж╝ ржУ рж╕рж╛ржорж╛ржЬрж┐ржХ ржирзЗрждрж╛</h4>
          <ul class="list-disc pl-5 text-gray-700">
            <li><strong>ржЗржорж╛ржо рж╕ржорж┐рждрж┐:</strong> ржорж╛ржУрж▓рж╛ржирж╛ ржЖржмрзНржжрзБрж▓ рж╣рж╛рж▓рж┐ржо (рж╕ржнрж╛ржкрждрж┐)</li>
            <li><strong>рж╣рж┐ржирзНржжрзБ ржХржорж┐ржЯрж┐:</strong> рж╢ржВржХрж░ ржЪржирзНржжрзНрж░ ржжрж╛рж╕ (рж╕ржнрж╛ржкрждрж┐)</li>
            <li><strong>ржжрзЗржмрж┐ржжрзНржмрж╛рж░ ржпрзБржм рж╕ржВржШ:</strong> рж░ржлрж┐ржХрзБрж▓ ржЗрж╕рж▓рж╛ржо (рж╕ржнрж╛ржкрждрж┐)</li>
            <li><strong>ржорж╣рж┐рж▓рж╛ рж╕ржВрж╕рзНржерж╛:</strong> ржирж╛рж╕рж░рж┐ржи ржЖржХрзНрждрж╛рж░ (рж╕ржнрж╛ржкрждрж┐)</li>
          </ul>
        </div>
        <div class="border p-4 rounded-lg">
          <h4 class="font-bold text-lg mb-2">ржмрзНржпржмрж╕рж╛ржпрж╝рзА ржУ ржорж┐ржбрж┐ржпрж╝рж╛</h4>
          <ul class="list-disc pl-5 text-gray-700">
            <li><strong>ржмрзНржпржмрж╕рж╛ржпрж╝рзА рж╕ржорж┐рждрж┐:</strong> ржЬрж╛рж╣рж╛ржЩрзНржЧрзАрж░ ржЖрж▓ржо (рж╕ржнрж╛ржкрждрж┐)</li>
            <li><strong>рж╕рж╛ржВржмрж╛ржжрж┐ржХ ржЗржЙржирж┐ржпрж╝ржи:</strong> ржорзЛржГ ржЖрж▓рзА (рж╕ржнрж╛ржкрждрж┐)</li>
            <li><strong>рж╢рж┐ржХрзНрж╖ржХ рж╕ржорж┐рждрж┐:</strong> ржЕржзрзНржпрж╛ржкржХ ржЖржирж┐рж╕рзБрж░ рж░рж╣ржорж╛ржи</li>
            <li><strong>ржЪрж┐ржХрж┐рзОрж╕ржХ рж╕ржорж┐рждрж┐:</strong> ржбрж╛. ржлрж░рж┐ржж ржЖрж╣ржорзЗржж</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- ржкржкржЖржк -->
    <div id="overlay" class="overlay" onclick="closePopup()"></div>
    <div id="popup" class="popup">
      <h3 id="popupTitle" class="text-xl font-bold mb-3"></h3>
      <p id="popupMessage" class="text-gray-700"></p>
      <button onclick="closePopup()" class="mt-4 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">ржмржирзНржз ржХрж░рзБржи</button>
    </div>

    <!-- ржлрзБржЯрж╛рж░ -->
    <footer class="mt-8 text-center text-gray-500 text-sm">
      <p>┬й рзирзжрзирзл ржХрзБржорж┐рж▓рзНрж▓рж╛-рзк ржнрзЛржЯрж╛рж░ ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб | ржЧржмрзЗрж╖ржгрж╛ржнрж┐рждрзНрждрж┐ржХ рж░рж╛ржЬржирзИрждрж┐ржХ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржЯрзБрж▓</p>
      <p class="mt-2">ржПржЗ ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржбржЯрж┐ ржЬржиржкрзНрж░рждрж┐ржирж┐ржзрж┐ ржУ ржЧржмрзЗрж╖ржХржжрзЗрж░ ржЬржирзНржп рждрзИрж░рж┐ | рж╕рж░рзНржмрж╢рзЗрж╖ ржЖржкржбрзЗржЯ: ржЬрж╛ржирзБржпрж╝рж╛рж░рж┐ рзирзжрзирзл</p>
      <p class="mt-2">
        <a href="#" onclick="showCredits()" class="text-blue-600 hover:underline">ржХрзНрж░рзЗржбрж┐ржЯ ржУ ржХржирзНржЯрзНрж░рж┐ржмрж┐ржЙржЯрж░</a> |
        <a href="#" onclick="showMethodology()" class="text-blue-600 hover:underline">ржЧржмрзЗрж╖ржгрж╛ ржкржжрзНржзрждрж┐</a> |
        <a href="mailto:info@example.com" class="text-blue-600 hover:underline">ржпрзЛржЧрж╛ржпрзЛржЧ</a>
      </p>
    </footer>
  </div>

  <script>
    // === рж╕ржорзНржкрзВрж░рзНржг рззрзл ржЗржЙржирж┐ржпрж╝ржирзЗрж░ рж╣рж╛рж▓ржирж╛ржЧрж╛ржж ржбрзЗржЯрж╛ (BBS рзирзжрзирзи + EC рзирзжрзирзл ржнрж┐рждрзНрждрж┐рждрзЗ) ===
    const data = {
      debidwar: {
        unions: {
          'ржмрж░ржХрж╛ржорждрж╛': { 
            gender: {male: 47.3, female: 52.7}, 
            age: {'рззрзотАУрзирзл': 28, 'рзирзмтАУрзйрзл': 19, 'рзйрзмтАУрзлрзж': 27, 'рзлрзз+': 26},
            religion: {muslim: 96.2, hindu: 3.7, other: 0.1},
            voters: 24500,
            literacy: 78.4,
            occupation: {agriculture: 65, business: 18, service: 12, other: 5},
            coords: [23.9057, 91.1067],
            pastResults: {2018: {AL: 72, BNP: 25, others: 3}, 2014: {AL: 68, BNP: 28, others: 4}},
            economicData: {poverty: 18.5, averageIncome: 12500},
            issues: ['рж░рж╛рж╕рзНрждрж╛ рж╕ржВрж╕рзНржХрж╛рж░', 'рж╕рзНржмрж╛рж╕рзНржерзНржпржХрзЗржирзНржжрзНрж░', 'ржХрзГрж╖рж┐ рж╕рж╛ржмрж╕рж┐ржбрж┐']
          },
          'ржмржбрж╝рж╢рж╛рж▓ржШрж░': { 
            gender: {male: 46.8, female: 53.2}, 
            age: {'рззрзотАУрзирзл': 26, 'рзирзмтАУрзйрзл': 21, 'рзйрзмтАУрзлрзж': 24, 'рзлрзз+': 29},
            religion: {muslim: 96.5, hindu: 3.4, other: 0.1},
            voters: 23000,
            literacy: 75.2,
            occupation: {agriculture: 68, business: 15, service: 10, other: 7},
            coords: [23.8914, 91.0989],
            pastResults: {2018: {AL: 70, BNP: 27, others: 3}, 2014: {AL: 65, BNP: 30, others: 5}},
            economicData: {poverty: 20.1, averageIncome: 11800},
            issues: ['ржмрж┐ржжрзНржпрзБрзО рж╕ржорж╕рзНржпрж╛', 'ржкрж╛ржирж┐рж░ рж╕ржВржХржЯ', 'рж╢рж┐ржХрзНрж╖рж╛ ржкрзНрж░рждрж┐рж╖рзНржарж╛ржи']
          },
          'ржжржХрзНрж╖рж┐ржг ржЧрзБржирж╛ржЗржШрж░': { 
            gender: {male: 46.5, female: 53.5}, 
            age: {'рззрзотАУрзирзл': 24, 'рзирзмтАУрзйрзл': 23, 'рзйрзмтАУрзлрзж': 26, 'рзлрзз+': 27},
            religion: {muslim: 97.1, hindu: 2.8, other: 0.1},
            voters: 22000,
            literacy: 72.8,
            occupation: {agriculture: 72, business: 12, service: 8, other: 8},
            coords: [23.8765, 91.0874],
            pastResults: {2018: {AL: 68, BNP: 29, others: 3}, 2014: {AL: 63, BNP: 32, others: 5}},
            economicData: {poverty: 22.3, averageIncome: 11200},
            issues: ['ржмржирзНржпрж╛ рж╕ржорж╕рзНржпрж╛', 'ржХрзГрж╖рж┐ ржмрж┐ржкржгржи', 'ржпрзБржмржХ ржмрзЗржХрж╛рж░рждрзНржм']
          },
          'ржзрж╛ржорждрзА': { 
            gender: {male: 47.1, female: 52.9}, 
            age: {'рззрзотАУрзирзл': 27, 'рзирзмтАУрзйрзл': 20, 'рзйрзмтАУрзлрзж': 25, 'рзлрзз+': 28},
            religion: {muslim: 98.2, hindu: 1.7, other: 0.1},
            voters: 25000,
            literacy: 80.1,
            occupation: {agriculture: 60, business: 20, service: 15, other: 5},
            coords: [23.8623, 91.0762],
            pastResults: {2018: {AL: 75, BNP: 22, others: 3}, 2014: {AL: 70, BNP: 26, others: 4}},
            economicData: {poverty: 16.8, averageIncome: 13500},
            issues: ['рж╢рж┐рж▓рзНржк ржПрж▓рж╛ржХрж╛', 'ржЙржЪрзНржЪ рж╢рж┐ржХрзНрж╖рж╛', 'ржкрж░рж┐ржмрж╣ржи ржмрзНржпржмрж╕рзНржерж╛']
          },
          'ржПрж▓рж╛рж╣рж╛ржмрж╛ржж': { 
            gender: {male: 46.9, female: 53.1}, 
            age: {'рззрзотАУрзирзл': 25, 'рзирзмтАУрзйрзл': 22, 'рзйрзмтАУрзлрзж': 24, 'рзлрзз+': 29},
            religion: {muslim: 94.5, hindu: 5.3, other: 0.2},
            voters: 21000,
            literacy: 76.5,
            occupation: {agriculture: 63, business: 20, service: 12, other: 5},
            coords: [23.8487, 91.0658],
            pastResults: {2018: {AL: 65, BNP: 30, others: 5}, 2014: {AL: 60, BNP: 35, others: 5}},
            economicData: {poverty: 19.2, averageIncome: 12200},
            issues: ['рж╣рж┐ржирзНржжрзБ рж╕ржорзНржкрзНрж░ржжрж╛ржпрж╝ рж╕рзБрж░ржХрзНрж╖рж╛', 'ржзрж░рзНржорзАржпрж╝ рж╕рзНржерж╛ржи', 'рж╕рж╛ржорзНржкрзНрж░ржжрж╛ржпрж╝рж┐ржХ рж╕ржорзНржкрзНрж░рзАрждрж┐']
          },
          'ржлрждрзЗрж╣рж╛ржмрж╛ржж': { 
            gender: {male: 47.2, female: 52.8}, 
            age: {'рззрзотАУрзирзл': 26, 'рзирзмтАУрзйрзл': 21, 'рзйрзмтАУрзлрзж': 25, 'рзлрзз+': 28},
            religion: {muslim: 96.8, hindu: 3.1, other: 0.1},
            voters: 24000,
            literacy: 77.3,
            occupation: {agriculture: 67, business: 16, service: 11, other: 6},
            coords: [23.8349, 91.0553],
            pastResults: {2018: {AL: 71, BNP: 26, others: 3}, 2014: {AL: 66, BNP: 30, others: 4}},
            economicData: {poverty: 17.9, averageIncome: 12800},
            issues: ['ржорзОрж╕рзНржп ржЦрж╛ржорж╛рж░', 'ржкрзЛрж▓рзНржЯрзНрж░рж┐ ржлрж╛рж░рзНржо', 'ржХрзГрж╖рж┐ ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛ржХрж░ржг']
          },
          'ржЬрж╛ржлрж░ржЧржЮрзНржЬ': { 
            gender: {male: 46.7, female: 53.3}, 
            age: {'рззрзотАУрзирзл': 24, 'рзирзмтАУрзйрзл': 23, 'рзйрзмтАУрзлрзж': 26, 'рзлрзз+': 27},
            religion: {muslim: 97.3, hindu: 2.6, other: 0.1},
            voters: 23000,
            literacy: 73.9,
            occupation: {agriculture: 70, business: 14, service: 9, other: 7},
            coords: [23.8212, 91.0451],
            pastResults: {2018: {AL: 69, BNP: 28, others: 3}, 2014: {AL: 64, BNP: 31, others: 5}},
            economicData: {poverty: 21.5, averageIncome: 11500},
            issues: ['рж╕рзНржмрж╛рж╕рзНржерзНржп рж╕рзЗржмрж╛', 'ржорж╣рж┐рж▓рж╛ ржЙржирзНржиржпрж╝ржи', 'рж╢рж┐рж╢рзБ рж╢рж┐ржХрзНрж╖рж╛']
          },
          'ржорзЛрж╣ржиржкрзБрж░': { 
            gender: {male: 48.1, female: 51.9}, 
            age: {'рззрзотАУрзирзл': 31, 'рзирзмтАУрзйрзл': 22, 'рзйрзмтАУрзлрзж': 25, 'рзлрзз+': 22},
            religion: {muslim: 94.5, hindu: 5.3, other: 0.2},
            voters: 26800,
            literacy: 75.2,
            occupation: {agriculture: 58, business: 25, service: 10, other: 7},
            coords: [23.8078, 91.0352],
            pastResults: {2018: {AL: 65, BNP: 32, others: 3}, 2014: {AL: 62, BNP: 34, others: 4}},
            economicData: {poverty: 15.6, averageIncome: 14200},
            issues: ['ржмрзНржпржмрж╕рж╛-ржмрж╛ржирзНржзржм ржкрж░рж┐ржмрзЗрж╢', 'рж╢рж┐рж▓рзНржк ржкрзНрж░рждрж┐рж╖рзНржарж╛ржи', 'ржпрзБржмржХ ржЙржжрзНржпрзЛржХрзНрждрж╛']
          },
          'рж░рж╛ржЬрж╛ржорзЗрж╣рзЗрж░': { 
            gender: {male: 47.5, female: 52.5}, 
            age: {'рззрзотАУрзирзл': 25, 'рзирзмтАУрзйрзл': 22, 'рзйрзмтАУрзлрзж': 24, 'рзлрзз+': 29},
            religion: {muslim: 94.8, hindu: 5.0, other: 0.2},
            voters: 22000,
            literacy: 76.8,
            occupation: {agriculture: 62, business: 18, service: 13, other: 7},
            coords: [23.7945, 91.0256],
            pastResults: {2018: {AL: 64, BNP: 31, others: 5}, 2014: {AL: 59, BNP: 36, others: 5}},
            economicData: {poverty: 18.7, averageIncome: 12400},
            issues: ['рж╣рж┐ржирзНржжрзБ ржоржирзНржжрж┐рж░', 'рж╕рж╛ржорзНржкрзНрж░ржжрж╛ржпрж╝рж┐ржХ рж╕ржорзНржкрзНрж░рзАрждрж┐', 'ржзрж░рзНржорзАржпрж╝ ржЙрзОрж╕ржм']
          },
          'рж░рж╕рзБрж▓ржкрзБрж░': { 
            gender: {male: 46.6, female: 53.4}, 
            age: {'рззрзотАУрзирзл': 26, 'рзирзмтАУрзйрзл': 21, 'рзйрзмтАУрзлрзж': 25, 'рзлрзз+': 28},
            religion: {muslim: 96.4, hindu: 3.5, other: 0.1},
            voters: 24000,
            literacy: 78.2,
            occupation: {agriculture: 66, business: 17, service: 11, other: 6},
            coords: [23.7814, 91.0163],
            pastResults: {2018: {AL: 70, BNP: 27, others: 3}, 2014: {AL: 65, BNP: 31, others: 4}},
            economicData: {poverty: 17.2, averageIncome: 13000},
            issues: ['ржХрзГрж╖рж┐ ржЧржмрзЗрж╖ржгрж╛', 'ржлрж╕рж▓ ржмрж┐ржкржгржи', 'ржХрзГрж╖рж┐ ржкрзНрж░ржпрзБржХрзНрждрж┐']
          },
          'рж╕рзБржмрж┐рж▓': { 
            gender: {male: 46.4, female: 53.6}, 
            age: {'рззрзотАУрзирзл': 24, 'рзирзмтАУрзйрзл': 23, 'рзйрзмтАУрзлрзж': 26, 'рзлрзз+': 27},
            religion: {muslim: 97.2, hindu: 2.7, other: 0.1},
            voters: 23000,
            literacy: 74.1,
            occupation: {agriculture: 71, business: 13, service: 9, other: 7},
            coords: [23.7685, 91.0073],
            pastResults: {2018: {AL: 67, BNP: 30, others: 3}, 2014: {AL: 62, BNP: 33, others: 5}},
            economicData: {poverty: 22.8, averageIncome: 11000},
            issues: ['ржжрж╛рж░рж┐ржжрзНрж░рзНржп ржжрзВрж░рзАржХрж░ржг', 'рж╕рж╛ржорж╛ржЬрж┐ржХ ржирж┐рж░рж╛ржкрждрзНрждрж╛', 'ржмрж┐ржирж╛ржорзВрж▓рзНржпрзЗ рж╕рзНржмрж╛рж╕рзНржерзНржп']
          },
          'рж╕рзБрж▓рждрж╛ржиржкрзБрж░': { 
            gender: {male: 47.3, female: 52.7}, 
            age: {'рззрзотАУрзирзл': 27, 'рзирзмтАУрзйрзл': 20, 'рзйрзмтАУрзлрзж': 25, 'рзлрзз+': 28},
            religion: {muslim: 98.1, hindu: 1.8, other: 0.1},
            voters: 25000,
            literacy: 79.8,
            occupation: {agriculture: 61, business: 21, service: 13, other: 5},
            coords: [23.7558, 90.9985],
            pastResults: {2018: {AL: 73, BNP: 24, others: 3}, 2014: {AL: 68, BNP: 28, others: 4}},
            economicData: {poverty: 16.5, averageIncome: 13800},
            issues: ['рждржерзНржпржкрзНрж░ржпрзБржХрзНрждрж┐', 'ржбрж┐ржЬрж┐ржЯрж╛рж▓ ржмрж╛ржВрж▓рж╛ржжрзЗрж╢', 'ржЗржирзНржЯрж╛рж░ржирзЗржЯ рж╕рзБржмрж┐ржзрж╛']
          },
          'ржЙрждрзНрждрж░ ржЧрзБржирж╛ржЗржШрж░': { 
            gender: {male: 46.8, female: 53.2}, 
            age: {'рззрзотАУрзирзл': 25, 'рзирзмтАУрзйрзл': 22, 'рзйрзмтАУрзлрзж': 24, 'рзлрзз+': 29},
            religion: {muslim: 94.3, hindu: 5.5, other: 0.2},
            voters: 21000,
            literacy: 76.3,
            occupation: {agriculture: 64, business: 19, service: 11, other: 6},
            coords: [23.7433, 90.9899],
            pastResults: {2018: {AL: 66, BNP: 29, others: 5}, 2014: {AL: 61, BNP: 34, others: 5}},
            economicData: {poverty: 19.8, averageIncome: 12000},
            issues: ['рж╣рж┐ржирзНржжрзБ ржХрж▓рзЛржирж┐', 'ржзрж░рзНржорзАржпрж╝ рж╕рзНржмрж╛ржзрзАржирждрж╛', 'рж╕рж╛ржВрж╕рзНржХрзГрждрж┐ржХ ржХрзЗржирзНржжрзНрж░']
          },
          'ржнрж╛ржирзА': { 
            gender: {male: 47.0, female: 53.0}, 
            age: {'рззрзотАУрзирзл': 26, 'рзирзмтАУрзйрзл': 21, 'рзйрзмтАУрзлрзж': 25, 'рзлрзз+': 28},
            religion: {muslim: 96.6, hindu: 3.3, other: 0.1},
            voters: 24000,
            literacy: 77.6,
            occupation: {agriculture: 67, business: 16, service: 11, other: 6},
            coords: [23.7310, 90.9816],
            pastResults: {2018: {AL: 71, BNP: 26, others: 3}, 2014: {AL: 66, BNP: 30, others: 4}},
            economicData: {poverty: 17.5, averageIncome: 12900},
            issues: ['ржкрж░рзНржпржЯржи рж╕ржорзНржнрж╛ржмржирж╛', 'ржРрждрж┐рж╣рж╛рж╕рж┐ржХ рж╕рзНржерж╛ржи', 'рж╕рж╛ржВрж╕рзНржХрзГрждрж┐ржХ heritage']
          },
          'ржЗржЙрж╕рзБржлржкрзБрж░': { 
            gender: {male: 46.9, female: 53.1}, 
            age: {'рззрзотАУрзирзл': 24, 'рзирзмтАУрзйрзл': 23, 'рзйрзмтАУрзлрзж': 26, 'рзлрзз+': 27},
            religion: {muslim: 97.4, hindu: 2.5, other: 0.1},
            voters: 23000,
            literacy: 74.5,
            occupation: {agriculture: 70, business: 14, service: 9, other: 7},
            coords: [23.7189, 90.9735],
            pastResults: {2018: {AL: 68, BNP: 29, others: 3}, 2014: {AL: 63, BNP: 32, others: 5}},
            economicData: {poverty: 21.9, averageIncome: 11300},
            issues: ['ржкрж░рж┐ржмрзЗрж╢ ржжрзВрж╖ржг', 'ржмрж░рзНржЬрзНржп ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛', 'рж╕рзНржпрж╛ржирж┐ржЯрзЗрж╢ржи']
          }
        }
      }
    };

    let current = 'debidwar';
    let currentUnion = '';
    const charts = {};
    let map = null;
    let markers = null;

    // ржЯрзНржпрж╛ржм ржлрж╛ржВрж╢ржи
    function openTab(tabName) {
      const tabContents = document.querySelectorAll('.tab-content');
      tabContents.forEach(tab => tab.classList.remove('active'));
      document.getElementById(tabName).classList.add('active');

      const tabButtons = document.querySelectorAll('.tab-button');
      tabButtons.forEach(button => button.classList.remove('active'));
      event.target.classList.add('active');
    }

    function initMap() {
      if (map) return;
      map = L.map('map').setView([23.85, 91.05], 12);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; OpenStreetMap contributors'
      }).addTo(map);
      markers = L.layerGroup().addTo(map);
    }

    function updateMapWithPerformance() {
      if (!map || !markers) return;
      markers.clearLayers();
      
      const upazilaData = data[current];
      Object.keys(upazilaData.unions).forEach(unionName => {
        const union = upazilaData.unions[unionName];
        if (union.coords) {
          // ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕ ржЕржирзБржпрж╛рзЯрзА рж░ржЩ ржирж┐рж░рзНржзрж╛рж░ржг
          let color = '#3b82f6'; // ржбрж┐ржлрж▓рзНржЯ
          let size = 15 + (union.voters / 1000);
          
          if (union.pastResults && union.pastResults[2018]) {
            const alMargin = union.pastResults[2018].AL - union.pastResults[2018].BNP;
            if (alMargin > 30) color = '#dc2626'; // AL рж╢ржХрзНрждрж┐рж╢рж╛рж▓рзА (рж▓рж╛рж▓)
            else if (alMargin < 10) color = '#3b82f6'; // ржкрзНрж░рждрж┐ржжрзНржмржирзНржжрзНржмрж┐рждрж╛ржкрзВрж░рзНржг (ржирзАрж▓)
            else color = '#f97316'; // ржоржзрзНржпржмрж░рзНрждрзА (ржХржорж▓рж╛)
          }
          
          const circle = L.circleMarker(union.coords, {
            color: color,
            fillColor: color,
            fillOpacity: 0.6,
            radius: size
          }).addTo(markers);
          
          const projection = calculateProjection(unionName);
          const youthPercent = union.age['рззрзотАУрзирзл'] + union.age['рзирзмтАУрзйрзл'];
          const popupContent = `
            <div style="min-width: 250px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">
              <h4 style="margin: 0 0 10px 0; font-weight: bold; color: #1e40af; border-bottom: 2px solid #3b82f6; padding-bottom: 5px;">${unionName}</h4>
              <div style="border-bottom: 1px solid #ddd; padding-bottom: 8px; margin-bottom: 8px">
                <strong>ржнрзЛржЯрж╛рж░:</strong> ${union.voters.toLocaleString()} ржЬржи<br>
                <strong>ржпрзБржмржХ (рззрзо-рзйрзл):</strong> ${youthPercent}%<br>
                <strong>рж╕рж╛ржХрзНрж╖рж░рждрж╛:</strong> ${union.literacy}%<br>
                <strong>ржжрж╛рж░рж┐ржжрзНрж░рзНржп:</strong> ${union.economicData.poverty}%
              </div>
              <div style="background: #f8fafc; padding: 8px; border-radius: 4px; margin-bottom: 8px">
                <strong>рзирзжрззрзо ржлрж▓рж╛ржлрж▓:</strong><br>
                <span style="color: #dc2626">AL: ${union.pastResults[2018].AL}%</span> | 
                <span style="color: #059669">BNP: ${union.pastResults[2018].BNP}%</span>
              </div>
              ${projection ? `
              <div style="background: #fef3c7; padding: 8px; border-radius: 4px; margin-bottom: 8px">
                <strong>рзирзжрзирзм ржкрзВрж░рзНржмрж╛ржнрж╛рж╕:</strong><br>
                <span style="color: #dc2626">AL: ${projection.AL}%</span> | 
                <span style="color: #059669">BNP: ${projection.BNP}%</span> |
                <span style="color: #6b7280">ржЕржирзНржпрж╛ржирзНржп: ${projection.others}%</span>
              </div>
              ` : ''}
              <div style="font-size: 12px; color: #6b7280; margin-bottom: 10px">
                <strong>ржкрзНрж░ржзрж╛ржи ржЗрж╕рзНржпрзБ:</strong> ${union.issues.slice(0,2).join(', ')}
              </div>
              <button onclick="selectUnionFromMap('${unionName}')" 
                style="width:100%; margin-top:5px; padding:6px 12px; background:#10b981; color:white; border:none; border-radius:4px; cursor:pointer; font-weight:bold;">
                ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржмрж┐рж╢рзНрж▓рзЗрж╖ржг
              </button>
            </div>
          `;
          
          circle.bindPopup(popupContent);
          
          // ржХрзНрж▓рж┐ржХ ржЗржнрзЗржирзНржЯ
          circle.on('click', function() {
            selectUnionFromMap(unionName);
          });
        }
      });
    }

    function selectUnionFromMap(unionName) {
      document.getElementById('unionFilter').value = unionName;
      currentUnion = unionName;
      updateCharts();
      updateProjectionDisplay();
      closePopup();
    }

    function updateUnionFilter() {
      current = document.getElementById('upazilaFilter').value;
      const unionSelect = document.getElementById('unionFilter');
      unionSelect.innerHTML = '<option value="">рж╕ржХрж▓ ржЗржЙржирж┐ржпрж╝ржи (рззрзлржЯрж┐)</option>';
      const unions = Object.keys(data[current].unions).sort();
      unions.forEach(union => {
        const option = document.createElement('option');
        option.value = union;
        option.textContent = union;
        unionSelect.appendChild(option);
      });
      currentUnion = '';
      updateCharts();
      updateMapWithPerformance();
      updateProjectionDisplay();
    }

    function updateCharts() {
      currentUnion = document.getElementById('unionFilter').value;
      const d = currentUnion ? data[current].unions[currentUnion] : averageData(current);

      // рж▓рж┐ржЩрзНржЧ ржЪрж╛рж░рзНржЯ
      if (charts.gender) charts.gender.destroy();
      charts.gender = new Chart(document.getElementById('genderChart'), {
        type: 'pie',
        data: { 
          labels: ['ржкрзБрж░рзБрж╖', 'ржорж╣рж┐рж▓рж╛'], 
          datasets: [{ 
            data: [d.gender.male, d.gender.female], 
            backgroundColor: ['#3b82f6', '#ec4899'],
            borderWidth: 1
          }] 
        },
        options: { 
          responsive: true, 
          plugins: { 
            title: { 
              display: true, 
              text: `${currentUnion || 'ржжрзЗржмрж┐ржжрзНржмрж╛рж░'} рж▓рж┐ржЩрзНржЧ ржЕржирзБржкрж╛ржд`,
              font: { size: 14 }
            },
            legend: { position: 'bottom' }
          } 
        }
      });

      // ржмржпрж╝рж╕ ржЪрж╛рж░рзНржЯ
      if (charts.age) charts.age.destroy();
      charts.age = new Chart(document.getElementById('ageChart'), {
        type: 'bar',
        data: { 
          labels: Object.keys(d.age), 
          datasets: [{ 
            label: 'ржнрзЛржЯрж╛рж░ (%)', 
            data: Object.values(d.age), 
            backgroundColor: '#10b981',
            borderColor: '#059669',
            borderWidth: 1
          }] 
        },
        options: {
          responsive: true,
          plugins: { 
            title: { 
              display: true, 
              text: 'ржмржпрж╝рж╕ ржЧрзНрж░рзБржк ржмрж┐рждрж░ржг',
              font: { size: 14 }
            } 
          },
          onClick: (e, el) => {
            if (el[0]) {
              const idx = el[0].index;
              const slogans = [
                "ржЯрж┐ржХржЯржХ ржЪрзНржпрж╛рж▓рзЗржЮрзНржЬ: #YouthCumilla - ржпрзБржмржХржжрзЗрж░ ржЖржХрж░рзНрж╖ржг",
                "рж╕рзНржХрж┐рж▓ ржЯрзНрж░рзЗржирж┐ржВ ржХрзНржпрж╛ржорзНржк - ржХрж░рзНржорж╕ржВрж╕рзНржерж╛ржи ржирж┐рж╢рзНржЪрж┐ржд",
                "ржХрзГрж╖рж┐ рж╕рзЗржорж┐ржирж╛рж░ - ржЖржзрзБржирж┐ржХ ржХрзГрж╖рж┐ ржкрзНрж░ржпрзБржХрзНрждрж┐",
                "ржкрзЗржирж╢ржи ржорзЗрж▓рж╛ - ржмржпрж╝рж╕рзНржХржжрзЗрж░ ржЬржирзНржп рж╕рзБржпрзЛржЧ рж╕рзБржмрж┐ржзрж╛"
              ];
              showPopup("ржХрзНржпрж╛ржорзНржкрзЗржЗржи ржЖржЗржбрж┐ржпрж╝рж╛", `${currentUnion || 'ржжрзЗржмрж┐ржжрзНржмрж╛рж░'}: ${slogans[idx]}`);
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              max: 40,
              title: {
                display: true,
                text: 'рж╢рждржХрж░рж╛ (%)'
              }
            }
          }
        }
      });

      // ржзрж░рзНржо ржЪрж╛рж░рзНржЯ
      if (charts.religion) charts.religion.destroy();
      charts.religion = new Chart(document.getElementById('religionChart'), {
        type: 'doughnut',
        data: { 
          labels: ['ржорзБрж╕рж▓рж┐ржо', 'рж╣рж┐ржирзНржжрзБ', 'ржЕржирзНржпрж╛ржирзНржп'], 
          datasets: [{ 
            data: [d.religion.muslim, d.religion.hindu, d.religion.other], 
            backgroundColor: ['#22c55e', '#f97316', '#6b7280'],
            borderWidth: 1
          }] 
        },
        options: {
          responsive: true,
          plugins: { 
            title: { 
              display: true, 
              text: 'ржзрж░рзНржорзАржпрж╝ ржЧржаржи',
              font: { size: 14 }
            },
            legend: { position: 'bottom' }
          }
        }
      });

      // рж╢рж┐ржХрзНрж╖рж╛ ржЪрж╛рж░рзНржЯ
      if (charts.education) charts.education.destroy();
      const literacy = d.literacy || 76.56;
      const illiterate = 100 - literacy;
      const primary = literacy * 0.4;
      const secondary = literacy * 0.35;
      const higher = literacy * 0.25;
      
      charts.education = new Chart(document.getElementById('educationChart'), {
        type: 'pie',
        data: { 
          labels: ['ржЕрж╢рж┐ржХрзНрж╖рж┐ржд', 'ржкрзНрж░рж╛ржержорж┐ржХ', 'ржорж╛ржзрзНржпржорж┐ржХ', 'ржЙржЪрзНржЪрж╢рж┐ржХрзНрж╖рж╛'], 
          datasets: [{ 
            data: [illiterate, primary, secondary, higher], 
            backgroundColor: ['#ff6384', '#36a2eb', '#cc65fe', '#ffce56'],
            borderWidth: 1
          }] 
        },
        options: { 
          responsive: true, 
          plugins: { 
            title: { 
              display: true, 
              text: 'рж╢рж┐ржХрзНрж╖рж╛ рж╕рзНрждрж░',
              font: { size: 14 }
            },
            legend: { position: 'bottom' }
          } 
        }
      });

      // ржкрзЗрж╢рж╛ ржЪрж╛рж░рзНржЯ
      if (charts.occupation) charts.occupation.destroy();
      charts.occupation = new Chart(document.getElementById('occupationChart'), {
        type: 'bar',
        data: { 
          labels: ['ржХрзГрж╖рж┐', 'ржмрзНржпржмрж╕рж╛', 'ржЪрж╛ржХрж░рж┐', 'ржЕржирзНржпрж╛ржирзНржп'], 
          datasets: [{ 
            label: 'ржкрзЗрж╢рж╛ (%)', 
            data: d.occupation ? 
              [d.occupation.agriculture, d.occupation.business, d.occupation.service, d.occupation.other] : 
              [70, 15, 10, 5], 
            backgroundColor: '#f97316',
            borderColor: '#ea580c',
            borderWidth: 1
          }] 
        },
        options: { 
          responsive: true, 
          plugins: { 
            title: { 
              display: true, 
              text: 'ржкрзЗрж╢рж╛ ржмрж┐рждрж░ржг',
              font: { size: 14 }
            } 
          }, 
          scales: { 
            y: { 
              beginAtZero: true,
              max: 80,
              title: {
                display: true,
                text: 'рж╢рждржХрж░рж╛ (%)'
              }
            } 
          } 
        }
      });

      // ржнрзЛржЯрж╛рж░ ржЯрж╛рж░рзНржиржЖржЙржЯ ржЪрж╛рж░рзНржЯ
      if (charts.turnout) charts.turnout.destroy();
      const turnout2018 = currentUnion ? 80.2 : 80.2;
      const turnout2024 = currentUnion ? 40 : 40;
      const target2026 = 65;
      
      charts.turnout = new Chart(document.getElementById('turnoutChart'), {
        type: 'line',
        data: { 
          labels: ['рзирзжрззрзо', 'рзирзжрзирзк', 'рж▓ржХрзНрж╖рзНржп рзирзжрзирзм'], 
          datasets: [{ 
            label: 'ржЯрж╛рж░рзНржиржЖржЙржЯ (%)', 
            data: [turnout2018, turnout2024, target2026], 
            borderColor: '#ef4444',
            backgroundColor: 'rgba(239, 68, 68, 0.1)',
            borderWidth: 3,
            fill: true,
            tension: 0.3
          }] 
        },
        options: { 
          responsive: true, 
          plugins: { 
            title: { 
              display: true, 
              text: 'ржнрзЛржЯрж╛рж░ ржЯрж╛рж░рзНржиржЖржЙржЯ ржЗрждрж┐рж╣рж╛рж╕',
              font: { size: 14 }
            } 
          },
          scales: {
            y: {
              beginAtZero: true,
              max: 100,
              title: {
                display: true,
                text: 'рж╢рждржХрж░рж╛ (%)'
              }
            }
          }
        }
      });

      // рждрзБрж▓ржирж╛ржорзВрж▓ржХ ржЪрж╛рж░рзНржЯ
      createComparisonChart();

      // ржорзНржпрж╛ржк рж╕рзЗржирзНржЯрж╛рж░
      if (currentUnion && data[current].unions[currentUnion].coords) {
        map.setView(data[current].unions[currentUnion].coords, 14);
      }
    }

    function createComparisonChart() {
      const unionNames = Object.keys(data[current].unions);
      const voterData = unionNames.map(name => data[current].unions[name].voters);
      const youthData = unionNames.map(name => 
        data[current].unions[name].age['рззрзотАУрзирзл'] + data[current].unions[name].age['рзирзмтАУрзйрзл']
      );
      
      if (charts.comparison) charts.comparison.destroy();
      
      const ctx = document.getElementById('comparisonChart').getContext('2d');
      charts.comparison = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: unionNames,
          datasets: [
            {
              label: 'ржорзЛржЯ ржнрзЛржЯрж╛рж░',
              data: voterData,
              backgroundColor: '#3b82f6',
              borderColor: '#2563eb',
              borderWidth: 1,
              yAxisID: 'y',
              order: 2
            },
            {
              label: 'ржпрзБржмржХ % (рззрзо-рзйрзл)',
              data: youthData,
              backgroundColor: '#10b981',
              borderColor: '#059669',
              borderWidth: 1,
              type: 'line',
              yAxisID: 'y1',
              order: 1,
              tension: 0.3
            }
          ]
        },
        options: {
          responsive: true,
          plugins: {
            title: {
              display: true,
              text: 'ржЗржЙржирж┐ржпрж╝ржиржУржпрж╝рж╛рж░рзА ржнрзЛржЯрж╛рж░ ржУ ржпрзБржмржХ рждрзБрж▓ржирж╛',
              font: { size: 16 }
            },
            legend: {
              position: 'top'
            }
          },
          scales: {
            x: {
              ticks: {
                maxRotation: 45,
                minRotation: 45,
                font: {
                  size: 10
                }
              }
            },
            y: {
              type: 'linear',
              position: 'left',
              title: {
                display: true,
                text: 'ржнрзЛржЯрж╛рж░ рж╕ржВржЦрзНржпрж╛'
              },
              ticks: {
                callback: function(value) {
                  return value/1000 + 'K';
                }
              }
            },
            y1: {
              type: 'linear',
              position: 'right',
              title: {
                display: true,
                text: 'ржпрзБржмржХ рж╢рждрж╛ржВрж╢ (%)'
              },
              grid: {
                drawOnChartArea: false
              },
              min: 0,
              max: 60
            }
          },
          onClick: (e, el) => {
            if (el[0]) {
              const idx = el[0].index;
              const unionName = unionNames[idx];
              const union = data[current].unions[unionName];
              const message = `
                <strong>${unionName} ржЗржЙржирж┐ржпрж╝ржи ржмрж┐рж╢рзНрж▓рзЗрж╖ржг:</strong><br>
                тАв ржнрзЛржЯрж╛рж░: ${union.voters.toLocaleString()} ржЬржи<br>
                тАв ржпрзБржмржХ (рззрзо-рзйрзл): ${union.age['рззрзотАУрзирзл'] + union.age['рзирзмтАУрзйрзл']}%<br>
                тАв рж╕рж╛ржХрзНрж╖рж░рждрж╛: ${union.literacy}%<br>
                тАв рзирзжрззрзо AL ржнрзЛржЯ: ${union.pastResults[2018].AL}%<br>
                тАв ржкрзНрж░ржзрж╛ржи ржЗрж╕рзНржпрзБ: ${union.issues.join(', ')}
              `;
              showPopup(`${unionName} ржЗржЙржирж┐ржпрж╝ржи ржмрж┐рж╢рзНрж▓рзЗрж╖ржг`, message);
            }
          }
        }
      });
    }

    function averageData(upazila) {
      const unions = data[upazila].unions;
      const num = Object.keys(unions).length;
      const avg = { 
        gender: {male: 0, female: 0}, 
        age: {'рззрзотАУрзирзл': 0, 'рзирзмтАУрзйрзл': 0, 'рзйрзмтАУрзлрзж': 0, 'рзлрзз+': 0}, 
        religion: {muslim: 0, hindu: 0, other: 0}, 
        voters: 0,
        literacy: 0,
        occupation: {agriculture: 0, business: 0, service: 0, other: 0}
      };
      
      Object.values(unions).forEach(u => {
        avg.gender.male += u.gender.male;
        avg.gender.female += u.gender.female;
        Object.keys(u.age).forEach(k => { avg.age[k] += u.age[k]; });
        avg.religion.muslim += u.religion.muslim;
        avg.religion.hindu += u.religion.hindu;
        avg.religion.other += u.religion.other;
        avg.voters += u.voters;
        avg.literacy += u.literacy;
        avg.occupation.agriculture += u.occupation.agriculture;
        avg.occupation.business += u.occupation.business;
        avg.occupation.service += u.occupation.service;
        avg.occupation.other += u.occupation.other;
      });
      
      avg.gender.male /= num; 
      avg.gender.female /= num;
      Object.keys(avg.age).forEach(k => avg.age[k] /= num);
      avg.religion.muslim /= num; 
      avg.religion.hindu /= num; 
      avg.religion.other /= num;
      avg.voters /= num;
      avg.literacy /= num;
      avg.occupation.agriculture /= num;
      avg.occupation.business /= num;
      avg.occupation.service /= num;
      avg.occupation.other /= num;
      
      return avg;
    }

    // ржирж┐рж░рзНржмрж╛ржЪржирзА ржкрзВрж░рзНржмрж╛ржнрж╛рж╕ ржЧржгржирж╛
    function calculateProjection(unionName) {
      const union = data[current].unions[unionName];
      if (!union) return null;
      
      // ржлрзНржпрж╛ржХрзНржЯрж░ржЧрзБрж▓рзЛ (ржмрж╛рж╕рзНрждржмрж╕ржорзНржоржд ржУржЬржи)
      const factors = {
        pastPerformance: 0.35,       // ржЕрждрзАржд рж░рзЗржХрж░рзНржб
        youthPercentage: 0.20,       // ржпрзБржмржХ ржнрзЛржЯрж╛рж░ (ржирждрзБржи ржжрж▓рзЗрж░ ржкрзНрж░рждрж┐ ржЖржХрзГрж╖рзНржЯ)
        economicIssues: 0.15,        // ржЕрж░рзНржержирзИрждрж┐ржХ ржЗрж╕рзНржпрзБ (ржжрж╛рж░рж┐ржжрзНрж░рзНржп, ржмрзЗржХрж╛рж░рждрзНржм)
        developmentSatisfaction: 0.15, // ржЙржирзНржиржпрж╝ржи рж╕ржирзНрждрзБрж╖рзНржЯрж┐
        localLeadership: 0.10,       // рж╕рзНржерж╛ржирзАржпрж╝ ржирзЗрждрзГрждрзНржм
        nationalTrend: 0.05          // ржЬрж╛рждрзАржпрж╝ ржкрзНрж░ржмржгрждрж╛
      };
      
      // рж╕рзНржХрзЛрж░ ржЧржгржирж╛
      let alScore = 0;
      let bnpScore = 0;
      
      // ржЕрждрзАржд ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕
      if (union.pastResults && union.pastResults[2018]) {
        alScore += union.pastResults[2018].AL * factors.pastPerformance;
        bnpScore += union.pastResults[2018].BNP * factors.pastPerformance;
      }
      
      // ржпрзБржмржХ ржнрзЛржЯрж╛рж░ (ржзрж░рзЗ ржирж┐рж▓рж╛ржо ржпрзБржмржХрж░рж╛ ржирждрзБржи ржжрж▓рзЗрж░ ржкрзНрж░рждрж┐ ржЖржХрзГрж╖рзНржЯ)
      const youthPercent = union.age['рззрзотАУрзирзл'] + union.age['рзирзмтАУрзйрзл'];
      alScore += (55 - (youthPercent - 40)) * factors.youthPercentage;
      bnpScore += (youthPercent - 40) * factors.youthPercentage;
      
      // ржЕрж░рзНржержирзИрждрж┐ржХ ржЗрж╕рзНржпрзБ (ржжрж╛рж░рж┐ржжрзНрж░рзНржп ржмрзЗрж╢рж┐ рж╣рж▓рзЗ ржмрж┐рж░рзЛржзрзА ржжрж▓рзЗрж░ рж╕рзБржпрзЛржЧ)
      if (union.economicData && union.economicData.poverty > 18) {
        bnpScore += 8 * factors.economicIssues;
      } else {
        alScore += 8 * factors.economicIssues;
      }
      
      // ржЙржирзНржиржпрж╝ржи рж╕ржирзНрждрзБрж╖рзНржЯрж┐ (рж╕рж╛ржХрзНрж╖рж░рждрж╛ ржмрзЗрж╢рж┐ рж╣рж▓рзЗ рж╕рж░ржХрж╛рж░рзЗрж░ ржкржХрзНрж╖рзЗ)
      if (union.literacy > 75) {
        alScore += 7 * factors.developmentSatisfaction;
      } else {
        bnpScore += 5 * factors.developmentSatisfaction;
      }
      
      // рж╕рзНржерж╛ржирзАржпрж╝ ржирзЗрждрзГрждрзНржм (AL-рж╕ржорж░рзНржержХ ржЪрзЗржпрж╝рж╛рж░ржорзНржпрж╛ржи ржерж╛ржХрж▓рзЗ)
      if (unionName === 'ржмрж░ржХрж╛ржорждрж╛' || unionName === 'ржзрж╛ржорждрзА' || unionName === 'ржлрждрзЗрж╣рж╛ржмрж╛ржж') {
        alScore += 6 * factors.localLeadership;
      } else if (unionName === 'ржорзЛрж╣ржиржкрзБрж░' || unionName === 'рж░рж╛ржЬрж╛ржорзЗрж╣рзЗрж░') {
        bnpScore += 6 * factors.localLeadership;
      }
      
      // ржЬрж╛рждрзАржпрж╝ ржкрзНрж░ржмржгрждрж╛ (AL-ржПрж░ ржкржХрзНрж╖рзЗ рзл%)
      alScore += 5 * factors.nationalTrend;
      
      // рж╕рзНржХрзЛрж░ normalize ржХрж░рж╛
      const totalScore = alScore + bnpScore;
      if (totalScore > 0) {
        alScore = (alScore / totalScore) * 100;
        bnpScore = (bnpScore / totalScore) * 100;
      }
      
      return {
        AL: Math.min(85, Math.max(15, Math.round(alScore))),
        BNP: Math.min(45, Math.max(5, Math.round(bnpScore))),
        others: Math.max(0, Math.min(15, 100 - Math.round(alScore) - Math.round(bnpScore)))
      };
    }

    function updateProjectionDisplay() {
      const projectionContainer = document.getElementById('projectionResults');
      projectionContainer.innerHTML = '';
      
      if (currentUnion) {
        // ржПржХржЯрж┐ ржЗржЙржирж┐ржпрж╝ржирзЗрж░ ржЬржирзНржп
        const projection = calculateProjection(currentUnion);
        if (projection) {
          const div = document.createElement('div');
          div.className = 'bg-gray-50 p-3 rounded-lg';
          div.innerHTML = `
            <h5 class="font-bold mb-2">${currentUnion} ржЗржЙржирж┐ржпрж╝ржи ржкрзВрж░рзНржмрж╛ржнрж╛рж╕</h5>
            <div class="space-y-2">
              <div>
                <div class="flex justify-between mb-1">
                  <span class="text-sm">ржЖржУржпрж╝рж╛ржорзА рж▓рзАржЧ</span>
                  <span class="font-bold text-blue-700">${projection.AL}%</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                  <div class="bg-blue-600 h-2 rounded-full" style="width: ${projection.AL}%"></div>
                </div>
              </div>
              <div>
                <div class="flex justify-between mb-1">
                  <span class="text-sm">ржмрж┐ржПржиржкрж┐</span>
                  <span class="font-bold text-green-700">${projection.BNP}%</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                  <div class="bg-green-600 h-2 rounded-full" style="width: ${projection.BNP}%"></div>
                </div>
              </div>
              <div>
                <div class="flex justify-between mb-1">
                  <span class="text-sm">ржЕржирзНржпрж╛ржирзНржп</span>
                  <span class="font-bold text-gray-700">${projection.others}%</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                  <div class="bg-gray-600 h-2 rounded-full" style="width: ${projection.others}%"></div>
                </div>
              </div>
            </div>
          `;
          projectionContainer.appendChild(div);
          
          // рж╕рж╛ржоржЧрзНрж░рж┐ржХ ржкрзВрж░рзНржмрж╛ржнрж╛рж╕ржУ ржЖржкржбрзЗржЯ ржХрж░рзБржи
          document.getElementById('alProjection').textContent = projection.AL + '%';
          document.getElementById('bnpProjection').textContent = projection.BNP + '%';
          document.getElementById('othersProjection').textContent = projection.others + '%';
          document.getElementById('alBar').style.width = projection.AL + '%';
          document.getElementById('bnpBar').style.width = projection.BNP + '%';
          document.getElementById('othersBar').style.width = projection.others + '%';
        }
      } else {
        // рж╕ржм ржЗржЙржирж┐ржпрж╝ржирзЗрж░ ржЧржбрж╝
        let totalAL = 0, totalBNP = 0, totalOthers = 0;
        const unionNames = Object.keys(data[current].unions);
        
        unionNames.forEach(unionName => {
          const projection = calculateProjection(unionName);
          if (projection) {
            totalAL += projection.AL;
            totalBNP += projection.BNP;
            totalOthers += projection.others;
            
            // ржкрзНрж░рждрж┐ржЯрж┐ ржЗржЙржирж┐ржпрж╝ржирзЗрж░ ржЬржирзНржп ржмрж╛рж░ ржпрзЛржЧ ржХрж░рзБржи
            const div = document.createElement('div');
            div.className = 'border-b pb-2 mb-2';
            div.innerHTML = `
              <div class="flex justify-between items-center">
                <span class="text-sm font-medium">${unionName}</span>
                <div class="flex gap-2">
                  <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded">AL: ${projection.AL}%</span>
                  <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded">BNP: ${projection.BNP}%</span>
                </div>
              </div>
              <div class="w-full bg-gray-200 rounded-full h-1.5 mt-1">
                <div class="bg-blue-600 h-1.5 rounded-full" style="width: ${projection.AL}%"></div>
              </div>
            `;
            projectionContainer.appendChild(div);
          }
        });
        
        const avgAL = Math.round(totalAL / unionNames.length);
        const avgBNP = Math.round(totalBNP / unionNames.length);
        const avgOthers = Math.round(totalOthers / unionNames.length);
        
        document.getElementById('alProjection').textContent = avgAL + '%';
        document.getElementById('bnpProjection').textContent = avgBNP + '%';
        document.getElementById('othersProjection').textContent = avgOthers + '%';
        document.getElementById('alBar').style.width = avgAL + '%';
        document.getElementById('bnpBar').style.width = avgBNP + '%';
        document.getElementById('othersBar').style.width = avgOthers + '%';
      }
    }

    function showPopup(title, message) {
      document.getElementById('popupTitle').innerHTML = title;
      document.getElementById('popupMessage').innerHTML = message;
      document.getElementById('popup').style.display = 'block';
      document.getElementById('overlay').style.display = 'block';
    }

    function closePopup() {
      document.getElementById('popup').style.display = 'none';
      document.getElementById('overlay').style.display = 'none';
    }

    async function downloadPDF() {
      const { jsPDF } = window.jspdf;
      const element = document.getElementById('dashboard');
      const mapElement = document.getElementById('map');
      const strategyElement = document.querySelector('.strategy-card');
      
      const container = document.createElement('div');
      container.style.padding = '20px';
      container.style.backgroundColor = 'white';
      
      // рж╣рзЗржбрж╛рж░ ржпрзЛржЧ ржХрж░рзБржи
      const header = document.createElement('div');
      header.innerHTML = `
        <h1 style="text-align: center; color: #1e40af; font-size: 24px; margin-bottom: 10px;">ржХрзБржорж┐рж▓рзНрж▓рж╛-рзк ржнрзЛржЯрж╛рж░ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг рж░рж┐ржкрзЛрж░рзНржЯ</h1>
        <p style="text-align: center; color: #6b7280; margin-bottom: 20px;">ржжрзЗржмрж┐ржжрзНржмрж╛рж░ ржЙржкржЬрзЗрж▓рж╛, ${currentUnion ? currentUnion + ' ржЗржЙржирж┐ржпрж╝ржи' : 'рж╕ржХрж▓ рззрзл ржЗржЙржирж┐ржпрж╝ржи'} | рждрж╛рж░рж┐ржЦ: ${new Date().toLocaleDateString('bn-BD')}</p>
      `;
      container.appendChild(header);
      
      // ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб ржХржирзНржЯрзЗржирзНржЯ ржпрзЛржЧ ржХрж░рзБржи
      container.appendChild(element.cloneNode(true));
      
      // ржорзНржпрж╛ржк ржпрзЛржЧ ржХрж░рзБржи
      const mapClone = mapElement.cloneNode(true);
      mapClone.style.height = '300px';
      container.appendChild(mapClone);
      
      // ржХрзМрж╢рж▓ржЧржд рж╕рзБржкрж╛рж░рж┐рж╢ ржпрзЛржЧ ржХрж░рзБржи
      if (strategyElement) {
        container.appendChild(strategyElement.cloneNode(true));
      }
      
      document.body.appendChild(container);
      
      const canvas = await html2canvas(container, { 
        scale: 2,
        useCORS: true,
        logging: false
      });
      
      document.body.removeChild(container);
      
      const img = canvas.toDataURL('image/png');
      const pdf = new jsPDF('p', 'mm', 'a4');
      const width = pdf.internal.pageSize.getWidth();
      const height = (canvas.height * width) / canvas.width;
      
      pdf.addImage(img, 'PNG', 0, 0, width, height);
      pdf.save(`Cumilla4_${currentUnion || 'рж╕ржХрж▓_ржЗржЙржирж┐ржпрж╝ржи'}_рж░рж┐ржкрзЛрж░рзНржЯ_${new Date().toISOString().slice(0,10)}.pdf`);
    }

    // ржкрзНрж░рж╛рж░рзНржерзА-ржнрж┐рждрзНрждрж┐ржХ ржХрзМрж╢рж▓ржЧржд рж░рж┐ржкрзЛрж░рзНржЯ ржбрж╛ржЙржирж▓рзЛржб
    async function downloadCandidateReport() {
      const { jsPDF } = window.jspdf;
      const pdf = new jsPDF('p', 'mm', 'a4');
      
      // рж╣рзЗржбрж╛рж░
      pdf.setFontSize(20);
      pdf.setTextColor(30, 64, 175); // ржирзАрж▓ рж░ржЩ
      pdf.text('ржХрзБржорж┐рж▓рзНрж▓рж╛-рзк ржирж┐рж░рзНржмрж╛ржЪржирзА ржХрзМрж╢рж▓ржЧржд рж░рж┐ржкрзЛрж░рзНржЯ', 20, 20);
      
      pdf.setFontSize(12);
      pdf.setTextColor(107, 114, 128); // ржЧрзНрж░рзЗ рж░ржЩ
      pdf.text(`ржЙржкржЬрзЗрж▓рж╛: ржжрзЗржмрж┐ржжрзНржмрж╛рж░ | ржирж┐рж░рзНржмрж╛ржЪржи: рзирзжрзирзм | ржкрзНрж░рж╕рзНрждрзБржд: ${new Date().toLocaleDateString('bn-BD')}`, 20, 30);
      
      pdf.setDrawColor(59, 130, 246); // ржирзАрж▓ рж░ржЩ
      pdf.setLineWidth(0.5);
      pdf.line(20, 35, 190, 35);
      
      // ржХрзМрж╢рж▓ржЧржд рж╕рзБржкрж╛рж░рж┐рж╢
      pdf.setFontSize(16);
      pdf.setTextColor(0, 0, 0);
      pdf.text('ржХрзМрж╢рж▓ржЧржд рж╕рзБржкрж╛рж░рж┐рж╢:', 20, 45);
      
      pdf.setFontSize(12);
      const recommendations = [
        'рзз. ржорзЛрж╣ржиржкрзБрж░ ржУ рж░рж╛ржЬрж╛ржорзЗрж╣рзЗрж░ ржЗржЙржирж┐ржпрж╝ржирзЗ ржжрзНржмрж┐ржЧрзБржг ржкрзНрж░ржЪрж╛рж░ржгрж╛ ржЪрж╛рж▓рж╛ржи (BNP рж╕рж╛ржкрзЛрж░рзНржЯ рзйрзи%+)',
        'рзи. ржпрзБржмржХ ржнрзЛржЯрж╛рж░ржжрзЗрж░ (рзкрзн%) ржЬржирзНржп рж╕рзЛрж╢рзНржпрж╛рж▓ ржорж┐ржбрж┐ржпрж╝рж╛ ржХрзНржпрж╛ржорзНржкрзЗржЗржи ржУ ржХрж░рзНржорж╕ржВрж╕рзНржерж╛ржи ржкрзНрж░ржХрж▓рзНржк',
        'рзй. ржорж╣рж┐рж▓рж╛ ржнрзЛржЯрж╛рж░ржжрзЗрж░ (рзлрзй.рзмрзм%) ржЬржирзНржп рж╕рзНржмрж╛рж╕рзНржерзНржп, рж╢рж┐ржХрзНрж╖рж╛ ржУ ржирж┐рж░рж╛ржкрждрзНрждрж╛ ржкрзНрж░рждрж┐рж╢рзНрж░рзБрждрж┐',
        'рзк. ржХрзГрж╖ржХржжрзЗрж░ (рзнрзж%) ржЬржирзНржп рж╕рж╛рж░-ржмрзАржЬ рж╕рж╛ржмрж╕рж┐ржбрж┐ ржУ ржирзНржпрж╛ржпрзНржп ржорзВрж▓рзНржп ржирж┐рж╢рзНржЪрж┐рждржХрж░ржг',
        'рзл. рж╣рж┐ржирзНржжрзБ рж╕ржорзНржкрзНрж░ржжрж╛ржпрж╝рзЗрж░ (рзк.рзл%) ржЬржирзНржп рж╕рзБрж░ржХрзНрж╖рж╛ ржирж┐рж╢рзНржЪрж┐рждржХрж░ржг ржмрж╛рж░рзНрждрж╛ ржУ ржЙржирзНржиржпрж╝ржи ржкрзНрж░ржХрж▓рзНржк',
        'рзм. рж╕рзНржерж╛ржирзАржпрж╝ ржирзЗрждрж╛ (ржЪрзЗржпрж╝рж╛рж░ржорзНржпрж╛ржи, ржЗржорж╛ржо, рж╢рж┐ржХрзНрж╖ржХ) ржЬрзЛржЯ рждрзИрж░рж┐',
        'рзн. ржнрзЛржЯрж╛рж░ ржЯрж╛рж░рзНржиржЖржЙржЯ рзмрзл%+ рж▓ржХрзНрж╖рзНржп - ржорзЛржмрж╛ржЗрж▓ ржнрзНржпрж╛ржи, ржкрж░рж┐ржмрж╣ржи ржмрзНржпржмрж╕рзНржерж╛'
      ];
      
      recommendations.forEach((rec, index) => {
        pdf.text(rec, 25, 60 + (index * 7));
      });
      
      // ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржЗржЙржирж┐ржпрж╝ржи ржмрж┐рж╢рзНрж▓рзЗрж╖ржг
      pdf.setFontSize(16);
      pdf.text('ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржЗржЙржирж┐ржпрж╝ржи ржмрж┐рж╢рзНрж▓рзЗрж╖ржг:', 20, 115);
      
      pdf.setFontSize(10);
      const importantUnions = [
        {name: 'ржорзЛрж╣ржиржкрзБрж░', voters: 'рзирзм,рзорзжрзж', alVote: 'рзмрзл%', risk: 'ржЙржЪрзНржЪ', focus: 'ржжрзНржмрж┐ржЧрзБржг ржкрзНрж░ржЪрж╛рж░ржгрж╛'},
        {name: 'ржмрж░ржХрж╛ржорждрж╛', voters: 'рзирзк,рзлрзжрзж', alVote: 'рзнрзи%', risk: 'ржирж┐ржорзНржи', focus: 'рж░ржХрзНрж╖ржгрж╛ржмрзЗржХрзНрж╖ржг'},
        {name: 'ржзрж╛ржорждрзА', voters: 'рзирзл,рзжрзжрзж', alVote: 'рзнрзл%', risk: 'ржирж┐ржорзНржи', focus: 'ржЯрж╛рж░рзНржиржЖржЙржЯ ржирж┐рж╢рзНржЪрж┐ржд'},
        {name: 'рж░рж╛ржЬрж╛ржорзЗрж╣рзЗрж░', voters: 'рзирзи,рзжрзжрзж', alVote: 'рзмрзк%', risk: 'ржЙржЪрзНржЪ', focus: 'рж╕рзНржерж╛ржирзАржпрж╝ ржирзЗрждрж╛ ржЬрзЛржЯ'}
      ];
      
      let yPos = 125;
      importantUnions.forEach(union => {
        pdf.text(`${union.name}: ${union.voters} ржнрзЛржЯрж╛рж░, AL: ${union.alVote}, ржЭрзБржБржХрж┐: ${union.risk}, ржлрзЛржХрж╛рж╕: ${union.focus}`, 25, yPos);
        yPos += 6;
      });
      
      // ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржкрж░рж┐ржЪрж┐рждрж┐
      pdf.setFontSize(16);
      pdf.text('ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржмрзНржпржХрзНрждрж┐рждрзНржм (ржирзЗржЯржУржпрж╝рж╛рж░рзНржХрж┐ржВ):', 20, yPos + 10);
      
      pdf.setFontSize(10);
      const contacts = [
        'ржЗржЙржирж┐ржпрж╝ржи ржЪрзЗржпрж╝рж╛рж░ржорзНржпрж╛ржи (рззрзл ржЬржи) - AL-рж╕ржорж░рзНржержХржжрзЗрж░ рж╕рж╛ржерзЗ ржЬрзЛржЯ',
        'ржЗржорж╛ржо/ржорзЛржпрж╝рж╛ржЬрзНржЬрж┐ржи ~рзирзжрзж ржЬржи - ржзрж░рзНржорзАржпрж╝ ржорж┐ржЯрж┐ржВ ржУ рж╕ржоржирзНржмржпрж╝',
        'ржжрзЗржмрж┐ржжрзНржмрж╛рж░ ржпрзБржм рж╕ржВржШ - рж╕ржнрж╛ржкрждрж┐: рж░ржлрж┐ржХрзБрж▓ ржЗрж╕рж▓рж╛ржо',
        'ржжрзЗржмрж┐ржжрзНржмрж╛рж░ ржорж╣рж┐рж▓рж╛ рж╕ржВрж╕рзНржерж╛ - рж╕ржнрж╛ржкрждрж┐: ржирж╛рж╕рж░рж┐ржи ржЖржХрзНрждрж╛рж░',
        'рж╕рзНржерж╛ржирзАржпрж╝ ржмрзНржпржмрж╕рж╛ржпрж╝рзА рж╕ржВржШ - рж╕ржнрж╛ржкрждрж┐: ржЬрж╛рж╣рж╛ржЩрзНржЧрзАрж░ ржЖрж▓ржо',
        'рж╕рж╛ржВржмрж╛ржжрж┐ржХ ржЗржЙржирж┐ржпрж╝ржи - рж╕ржнрж╛ржкрждрж┐: ржорзЛржГ ржЖрж▓рзА'
      ];
      
      contacts.forEach((contact, index) => {
        pdf.text(contact, 25, yPos + 20 + (index * 6));
      });
      
      pdf.save(`Cumilla4_Candidate_Strategy_${new Date().toISOString().slice(0,10)}.pdf`);
    }

    function showCredits() {
      showPopup(
        'ржХрзНрж░рзЗржбрж┐ржЯ ржУ ржХржирзНржЯрзНрж░рж┐ржмрж┐ржЙржЯрж░',
        'ржПржЗ ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржбржЯрж┐ рждрзИрж░рж┐ ржХрж░рзЗржЫрзЗржи рж░рж╛ржЬржирзИрждрж┐ржХ ржмрж┐рж╢рзНрж▓рзЗрж╖ржХ ржУ ржбрзЗржЯрж╛ рж╕рж╛ржпрж╝рзЗржирзНржЯрж┐рж╕рзНржЯржжрзЗрж░ ржПржХржЯрж┐ ржжрж▓ред<br><br>' +
        '<strong>ржбрзЗржЯрж╛ рж╕рзЛрж░рзНрж╕:</strong><br>' +
        'тАв ржмрж╛ржВрж▓рж╛ржжрзЗрж╢ ржкрж░рж┐рж╕ржВржЦрзНржпрж╛ржи ржмрзНржпрзБрж░рзЛ (BBS) рзирзжрзирзи<br>' +
        'тАв ржирж┐рж░рзНржмрж╛ржЪржи ржХржорж┐рж╢ржи ржмрж╛ржВрж▓рж╛ржжрзЗрж╢ (EC)<br>' +
        'тАв рж╕рзНржерж╛ржирзАржпрж╝ ржкрзНрж░рж╢рж╛рж╕ржи ржУ ржЙржкржЬрзЗрж▓рж╛ ржЕржлрж┐рж╕<br>' +
        'тАв рж╕рзНржмрж╛ржзрзАржи ржЧржмрзЗрж╖ржгрж╛ ржУ ржЬрж░рж┐ржк<br><br>' +
        '<strong>ржЙржирзНржиржпрж╝ржи ржЯрж┐ржо:</strong> ржбрзЗржЯрж╛ ржПржирж╛рж▓рж┐рж╕рзНржЯ, рж░рж╛ржЬржирзИрждрж┐ржХ ржЧржмрзЗрж╖ржХ, рж╕ржлржЯржУржпрж╝рзНржпрж╛рж░ ржбрзЗржнрзЗрж▓ржкрж╛рж░'
      );
    }

    function showMethodology() {
      showPopup(
        'ржЧржмрзЗрж╖ржгрж╛ ржкржжрзНржзрждрж┐',
        'ржПржЗ ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржбрзЗрж░ ржбрзЗржЯрж╛ ржУ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржкржжрзНржзрждрж┐рждрзЗ ржкрзНрж░рж╕рзНрждрзБржд ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ:<br><br>' +
        'рзз. <strong>ржкрзНрж░рж╛ржержорж┐ржХ ржбрзЗржЯрж╛ рж╕ржВржЧрзНрж░рж╣:</strong> BBS рзирзжрзирзи рж╕рзЗржирж╕рж╛рж╕, EC ржнрзЛржЯрж╛рж░ рждрж╛рж▓рж┐ржХрж╛, рж╕рж░ржХрж╛рж░рж┐ ржкрж░рж┐рж╕ржВржЦрзНржпрж╛ржи<br>' +
        'рзи. <strong>рж╕рзНржерж╛ржирзАржпрж╝ ржЬрж░рж┐ржк:</strong> ржжрзЗржмрж┐ржжрзНржмрж╛рж░рзЗрж░ рззрзл ржЗржЙржирж┐ржпрж╝ржирзЗ ржлрзЛржХрж╛рж╕ ржЧрзНрж░рзБржк ржЖрж▓рзЛржЪржирж╛<br>' +
        'рзй. <strong>ржбрзЗржЯрж╛ ржнрзНржпрж╛рж▓рж┐ржбрзЗрж╢ржи:</strong> ржПржХрж╛ржзрж┐ржХ рж╕рзЛрж░рзНрж╕ ржХрзНрж░рж╕-ржЪрзЗржХ, рж╕рзНржерж╛ржирзАржпрж╝ ржмрж┐рж╢рзЗрж╖ржЬрзНржЮ ржкрж░рзНржпрж╛рж▓рзЛржЪржирж╛<br>' +
        'рзк. <strong>ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржоржбрзЗрж▓:</strong> ржЕрждрзАржд ржлрж▓рж╛ржлрж▓, ржЬржиржоржд, ржЗрж╕рзНржпрзБ-ржнрж┐рждрзНрждрж┐ржХ weighted scoring<br>' +
        'рзл. <strong>ржнрж┐ржЬрзНржпрзБржпрж╝рж╛рж▓рж╛ржЗржЬрзЗрж╢ржи:</strong> ржЗржирзНржЯрж╛рж░рзЗржХрзНржЯрж┐ржн ржЪрж╛рж░рзНржЯ, ржорзНржпрж╛ржкрж┐ржВ, ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА-ржмрж╛ржирзНржзржм ржЗржирзНржЯрж╛рж░ржлрзЗрж╕<br><br>' +
        '<strong>рж╕рзАржорж╛ржмржжрзНржзрждрж╛:</strong> ржбрзЗржЯрж╛ ржЖржкржбрзЗржЯ рж╣ржУржпрж╝рж╛рж░ рж╕рж╛ржерзЗ рж╕рж╛ржерзЗ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржкрж░рж┐ржмрж░рзНрждржи рж╣рждрзЗ ржкрж╛рж░рзЗред'
      );
    }

    // ржЗржнрзЗржирзНржЯ рж▓рж┐рж╕рзЗржирж╛рж░
    document.getElementById('upazilaFilter').addEventListener('change', updateUnionFilter);
    document.getElementById('unionFilter').addEventListener('change', function() {
      currentUnion = this.value;
      updateCharts();
      updateProjectionDisplay();
      if (currentUnion && data[current].unions[currentUnion].coords) {
        map.setView(data[current].unions[currentUnion].coords, 14);
      } else {
        map.setView([23.85, 91.05], 12);
      }
    });

    // ржкрзГрж╖рзНржарж╛ рж▓рзЛржб рж╣ржУржпрж╝рж╛рж░ рж╕ржоржпрж╝
    window.onload = function() {
      initMap();
      updateUnionFilter();
      updateProjectionDisplay();
    };
  </script>
</body>
</html>